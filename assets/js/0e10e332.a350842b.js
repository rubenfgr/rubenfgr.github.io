"use strict";(self.webpackChunkrubenfgr_website=self.webpackChunkrubenfgr_website||[]).push([[1478],{86:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>t,toc:()=>c});var n=s(4848),o=s(8453);const i={title:"Vsftpd Ubuntu 20.04"},a=void 0,t={id:"servers/protocols/FTP/vsftpd_ubuntu20",title:"Vsftpd Ubuntu 20.04",description:"Instalaci\xf3n",source:"@site/docs/servers/protocols/FTP/vsftpd_ubuntu20.md",sourceDirName:"servers/protocols/FTP",slug:"/servers/protocols/FTP/vsftpd_ubuntu20",permalink:"/docs/servers/protocols/FTP/vsftpd_ubuntu20",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Vsftpd Ubuntu 20.04"},sidebar:"tutorialSidebar",previous:{title:"Protocolos",permalink:"/docs/category/protocolos"},next:{title:"EMQX",permalink:"/docs/servers/protocols/MQTT/emqx"}},l={},c=[{value:"Instalaci\xf3n",id:"instalaci\xf3n",level:2},{value:"Iniciar y parar",id:"iniciar-y-parar",level:2},{value:"Configuraci\xf3n /etc/vsftpd.conf",id:"configuraci\xf3n-etcvsftpdconf",level:2},{value:"Par\xe1metros m\xe1s importantes",id:"par\xe1metros-m\xe1s-importantes",level:3},{value:"Agregar un usuario",id:"agregar-un-usuario",level:2},{value:"Otras configuraciones",id:"otras-configuraciones",level:2},{value:"Habilitar FTPS",id:"habilitar-ftps",level:3},{value:"Otras directivas para SSL/TLS",id:"otras-directivas-para-ssltls",level:3},{value:"Puertos PASV (conexi\xf3n de control)",id:"puertos-pasv-conexi\xf3n-de-control",level:2},{value:"Propietario y permisos",id:"propietario-y-permisos",level:2},{value:"Ejemplo para el directorio /var/www/html",id:"ejemplo-para-el-directorio-varwwwhtml",level:2}];function d(e){const r={code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h2,{id:"instalaci\xf3n",children:"Instalaci\xf3n"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"sudo apt install vsftpd"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"iniciar-y-parar",children:"Iniciar y parar"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-sh",children:"sudo service vsftpd stop\r\nsudo service vsftpd reload\r\nsudo service vsftpd restart\r\nsudo service vsftpd status\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"configuraci\xf3n-etcvsftpdconf",children:"Configuraci\xf3n /etc/vsftpd.conf"}),"\n",(0,n.jsx)(r.h3,{id:"par\xe1metros-m\xe1s-importantes",children:"Par\xe1metros m\xe1s importantes"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"write_enable=YES"}),". Habilitar la escritura"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"local_umask=022"}),". Nuevos permisos para los datos copiados al servidor. Por defecto es 077"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"ftpd_banner"}),". Habilitar un banner de inicio de sesi\xf3n"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"chroot_list_enable=YES"}),". Los usuarios solo acceden dentro de su directorio /home/usuario"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"chroot_list_file=/etc/vsftpd.chroot_list"}),". Lista de usuarios con sus rutas predeterminadas (poner un nombre de usuario por l\xednea)"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"anonymousenable=NO"}),". Deshabilita usuarios an\xf3nimos"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"anon_upload_enable=YES"}),". Habilitar/Deshabilitar subida de archivos por usuarios an\xf3nimos"]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"agregar-un-usuario",children:"Agregar un usuario"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"sudo adduser rubenfgr"})}),"\n",(0,n.jsx)(r.p,{children:"En este momento ya se puede acceder al servidor con el usuario y contrase\xf1a creado"}),"\n",(0,n.jsx)(r.h2,{id:"otras-configuraciones",children:"Otras configuraciones"}),"\n",(0,n.jsx)(r.h3,{id:"habilitar-ftps",children:"Habilitar FTPS"}),"\n",(0,n.jsx)(r.p,{children:(0,n.jsx)(r.code,{children:"ssl_enable=YES"})}),"\n",(0,n.jsx)(r.p,{children:"En este momento ya se puede acceder por SSL/TLS ya que en la instalaci\xf3n de vsftps, por defecto, genera los certificados RSA necesarios."}),"\n",(0,n.jsx)(r.h3,{id:"otras-directivas-para-ssltls",children:"Otras directivas para SSL/TLS"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-sh",children:"llow_anon_ssl=NO\r\nforce_local_data_ssl=YES\r\nforce_local_logins_ssl=YES\r\nssl_tlsv1_1=NO\r\nssl_tlsv1_2=YES\r\nssl_tlsv1_3=YES\r\nssl_tlsv1=NO\r\nssl_sslv2=NO\r\nssl_sslv3=NO\r\nrequire_ssl_reuse=YES\r\nssl_ciphers=HIGH\n"})}),"\n",(0,n.jsx)(r.h2,{id:"puertos-pasv-conexi\xf3n-de-control",children:"Puertos PASV (conexi\xf3n de control)"}),"\n",(0,n.jsx)(r.p,{children:"Importante si se quieren habilitar los puertos en el cortafuegos"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-sh",children:"pasv_max_port=10000\r\npasv_min_port=9000\n"})}),"\n",(0,n.jsx)(r.h2,{id:"propietario-y-permisos",children:"Propietario y permisos"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-sh",children:"# Cambiar el propietario\r\nsudo chown user:user directorio|fichero\r\nsudo chown -R user:user directorio # recursivo\r\n# Permisos\r\nsudo chmod 777 directorio|fichero\r\nsudo chmod 777 -R directorio # recursivo\n"})}),"\n",(0,n.jsx)(r.h2,{id:"ejemplo-para-el-directorio-varwwwhtml",children:"Ejemplo para el directorio /var/www/html"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-sh",children:"# Ajustamos propietario y grupo (habitualmente ser\xe1 www-data)\r\nchown -R www-data:www-data /var/www/html/\r\n# Ajustamos permisos en ficheros y directorios\r\nfind /var/www/html/ -type d -exec chmod 0755 {} \\;   # rwxr-xr-x\r\nfind /var/www/html/ -type f -exec chmod 0644 {} \\;   # rw-r--r--\n"})})]})}function u(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},8453:(e,r,s)=>{s.d(r,{R:()=>a,x:()=>t});var n=s(6540);const o={},i=n.createContext(o);function a(e){const r=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),n.createElement(i.Provider,{value:r},e.children)}}}]);