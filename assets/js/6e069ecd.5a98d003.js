"use strict";(self.webpackChunkrubenfgr_website=self.webpackChunkrubenfgr_website||[]).push([[9525],{6681:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>d});var r=s(4848),i=s(8453);const a={title:"Referencia"},l=void 0,c={id:"servers/Apache/referencia",title:"Referencia",description:"Instalaci\xf3n",source:"@site/docs/servers/Apache/referencia.md",sourceDirName:"servers/Apache",slug:"/servers/Apache/referencia",permalink:"/docs/servers/Apache/referencia",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Referencia"},sidebar:"tutorialSidebar",previous:{title:"Apache",permalink:"/docs/category/apache"},next:{title:"Nginx",permalink:"/docs/category/nginx"}},o={},d=[{value:"Instalaci\xf3n",id:"instalaci\xf3n",level:2},{value:"Modos (mpm)",id:"modos-mpm",level:2},{value:"Peticiones al servidor",id:"peticiones-al-servidor",level:2},{value:"Configuraci\xf3n",id:"configuraci\xf3n",level:2},{value:"Directivas",id:"directivas",level:2},{value:"M\xf3dulo Core",id:"m\xf3dulo-core",level:3},{value:"La secci\xf3n &quot;Location&quot;",id:"la-secci\xf3n-location",level:3},{value:"Secciones &quot;DiretoryMatch y LocationMatch&quot;",id:"secciones-diretorymatch-y-locationmatch",level:3},{value:"Variables de entorno",id:"variables-de-entorno",level:2},{value:"Virtual Host",id:"virtual-host",level:2},{value:"M\xf3dulos",id:"m\xf3dulos",level:2},{value:"Tipos MIME",id:"tipos-mime",level:2},{value:"Autenticaci\xf3n y autorizaci\xf3n",id:"autenticaci\xf3n-y-autorizaci\xf3n",level:2},{value:"Autenticaci\xf3n",id:"autenticaci\xf3n",level:3},{value:"Ejemplo con esquema Basic",id:"ejemplo-con-esquema-basic",level:4},{value:"Autenticaci\xf3n mediante LDAP",id:"autenticaci\xf3n-mediante-ldap",level:4},{value:"Existen otros m\xf3dulos de autenticaci\xf3n: anon, dbd, dbm, file, socache",id:"existen-otros-m\xf3dulos-de-autenticaci\xf3n-anon-dbd-dbm-file-socache",level:4},{value:"Otras formas de limitar los recursos",id:"otras-formas-de-limitar-los-recursos",level:3},{value:"Redirecci\xf3n",id:"redirecci\xf3n",level:3},{value:"SSL/TLS - HTTPS",id:"ssltls---https",level:2},{value:"Generar certificado digital autofirmado",id:"generar-certificado-digital-autofirmado",level:3},{value:"Generar certificados con OpenSSL",id:"generar-certificados-con-openssl",level:3},{value:"Log",id:"log",level:2},{value:"Log de apache en formato CLF",id:"log-de-apache-en-formato-clf",level:3},{value:"Comprobar logs en Linux",id:"comprobar-logs-en-linux",level:3},{value:"Directivas para archivos de registro",id:"directivas-para-archivos-de-registro",level:3},{value:"Rotar los archivos de log para controlar su tama\xf1o en el tiempo",id:"rotar-los-archivos-de-log-para-controlar-su-tama\xf1o-en-el-tiempo",level:3},{value:"Encontrar rotatelogs en Linux o instalar en caso necesario",id:"encontrar-rotatelogs-en-linux-o-instalar-en-caso-necesario",level:3},{value:"Uso de logrotate (Linux)",id:"uso-de-logrotate-linux",level:3},{value:"Tomcat",id:"tomcat",level:2},{value:"Instalaci\xf3n desde repositorio",id:"instalaci\xf3n-desde-repositorio",level:3},{value:"Instalaci\xf3n manual",id:"instalaci\xf3n-manual",level:3}];function t(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"instalaci\xf3n",children:"Instalaci\xf3n"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"apt-get install apache2\r\n\r\n# Comprobar los m\xf3dulos de PHP e instalar\r\napt-cache search php | grep apache2\r\napt-get install libapache2-mod-php7.4\r\n\r\n# Comprobar los m\xf3dulos de MySQL e instalar\r\napt-cache search mysql-server\r\napt-get install mysql-server\r\napt-cache search mysql | grep php\r\napt-get install php7.4-mysql\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"modos-mpm",children:"Modos (mpm)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"mpm_prefork"}),". M\xe1s antiguo. Crea diferentes procesos independientes para manejar las diferentes peticiones. Trabajo seguro con PHP sin hilos. Consume muchos recursos (RAM y CPU)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"mpm_worker"}),". Este m\xf3dulo usa procesos y al mismo tiempo hace uso de threads (tambi\xe9n llamados hilos), es decir, combina las t\xe9cnicas de forking y threading. S\xf3lo soporta m\xf3dulos de Apache que sean thread-safe. El mod_php es incompatible, la alternativa es el mod php-fpm."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"mpm_event"}),". Versi\xf3n mejorada de worker y mejora el rendimiento durante las peticiones con Keep Alive. No es compatible con mod_php y se debe usar php-fpm."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"peticiones-al-servidor",children:"Peticiones al servidor"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo apt-get install apache2-utils\r\n# Ayuda\r\nab help\r\n# Peticiones concurrentes (-c) + n\xfamero de petciiones (-n) + host\r\nab -c 100 -n 1000 localhost\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"configuraci\xf3n",children:"Configuraci\xf3n"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Archivo de configuraci\xf3n"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"/etc/apache2/apache2.conf"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Comprobar la configuraci\xf3n en los archivos"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"apachectl configtest\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Iniciar, parar o reiniciar"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"service apache2 start\r\nservice apache2 stop\r\nservice apache2 restart\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Comprobar el puerto a la escucha"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo netstat -putona | grep apache\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Host y puerto de escucha"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"# Editar el fichero ports.conf\r\nListen 80\r\nListen 8080\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Directorio raiz para servir los archivos"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"DocumentRoot /var/www/html\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Index del directorio"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"DirectoryIndex index.html test.html etc.html\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"directivas",children:"Directivas"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Listen\r\nDocumentRoot\r\nInclude\r\nIncludeOptional"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"m\xf3dulo-core",children:"M\xf3dulo Core"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"ServerRoot"})," No necesario. Directorio de configuraci\xf3nd de Apache"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"ServerName"})," ",(0,r.jsx)(n.a,{href:"http://www.example.local",children:"www.example.local"}),"** Nombre de dominio para un VirtualHost. Se debe registrar en /etc/hosts"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:['ServerAdmin "',(0,r.jsx)(n.a,{href:"mailto:mail-admin@admin.local",children:"mail-admin@admin.local"}),'"']})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:'ErrorLog "/var/log/httpd/error_log"'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"KeepAlive on"})," Permite conexiones persistentes."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"VirtualHost"}),' Deshabilitar con "off"']}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Timeout 60"})," Tiempo de espera del servidor para cerrar conexi\xf3n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"ServerTokens Full"})," Nivel de detalle de la cabecera que el servidor envia al cliente"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"M\xf3dulo base mod_alias"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Alias"})," Permite direccionar una carpeta que este fuera del arbol de directorios"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"M\xf3dulo base mod_userdir"})}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"UserDir"})," Permite servir p\xe1ginas alojas dentro del directorio principal de cada usuario del sistema. Configuraci\xf3n habitual: ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.em,{children:"/home/test/public_html"})})," accedido con ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.em,{children:(0,r.jsx)(n.a,{href:"http://localhost/~test",children:"http://localhost/~test"})})})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Las directivas permiten E.R, por ejemplo:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'<Directory /var/www/html/te*>\r\n    Options +Indexes # Si en la url no se especifica el recurso muestra un listado, con "-" ser\xeda "Forbidden"\r\n    AllowOverride AuthConfig # Permite sobreescribir directivas con .htaccess\r\n</Directory>\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Archivos .htaccess"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Estos archivos se crean en los diretorios del sitio web.\r\nPermiten directivas aplicables en el contexto .htaccess.\r\nEl servidor no necesita reiniciarse."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"# Archivo .htaccess en /home/www/html/test/private\r\nRequire all denied\n"})}),"\n",(0,r.jsx)(n.p,{children:'El conjunto de directivas aplicables se limita por "AllowOverride":'}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"AllowOverride All"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"AllowOverride AuthConfig"}),": solo autenticaci\xf3n y control de acceso como AuthUserFile o Require"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"AllowOverride AuthConfig Indexes"}),": permite combinar estas directivas"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"la-secci\xf3n-location",children:'La secci\xf3n "Location"'}),"\n",(0,r.jsx)(n.p,{children:"Permite aplicar directivas a URLs con una forma espec\xedfica"}),"\n",(0,r.jsx)(n.h3,{id:"secciones-diretorymatch-y-locationmatch",children:'Secciones "DiretoryMatch y LocationMatch"'}),"\n",(0,r.jsxs)(n.p,{children:["Permiten poner ",(0,r.jsx)(n.strong,{children:"expresiones regulares"})," en vez de un diretorio o ruta a un recurso"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"variables-de-entorno",children:"Variables de entorno"}),"\n",(0,r.jsx)(n.p,{children:"Referencia a variables de entorno en la configuraci\xf3n de apache"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"User ${APACHE_RUN_USER}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Archivo de variables de entorno de apache"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.em,{children:"/etc/apache2/envvars"})})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"virtual-host",children:"Virtual Host"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Configuraci\xf3n com\xfan para todos los virtualhost en local"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-conf",children:'<VirtualHost *>\r\n   DocumentRoot "C:\\xampp\\htdocs"\r\n   ServerName localhost\r\n</VirtualHost>\n'})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:'Crear un nuevo fichero "nombre-host.conf" en /etc/apache2/sites-available'}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Copiar el c\xf3digo:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:" <VirtualHost *:8081> # Tambi\xe9n se puede especificar una IP concreta en caso de disponer de varias IPs. *:* o * (cualquier ip y cualquier puerto)\r\n\r\n     ServerName wwww.test.local\r\n     ServerAlias test.local www.test.local  # Para host virtuales basados en nombre\r\n     ServerAdmin webmaster@localhost\r\n     DocumentRoot /var/www/test\r\n\r\n     ErrorLog ${APACHE_LOG_DIR}/error.log\r\n     CustomLog ${APACHE_LOG_DIR}/access.log combined\r\n\r\n </VirtualHost>\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Si no es el puerto 80, se debe habilitar en ports.conf agregando:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"Listen 8081\r\n# O IP + Puerto\r\nListen 192.168.0.200:8081\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Crear un enlace simb\xf3lico y relativo del fichero creado a /etc/apache2/sites-enabled"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"ln -rs /etc/apache2/sites-available/nombre-host.conf /etc/apache2/sites-enabled/nombre-host.conf\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Habilitar el sitio (comandos para ubuntu)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"a2ensite\r\n# dehabilitar\r\na2dissite\r\n# O tambi\xe9n...\r\na2ensite <nombre-host>\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Reiniciar apache"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo service apache2 restart\r\n# O tambien...\r\nsudo apache2ctl restart\r\n# Comprobar la configuraci\xf3n\r\nsudo apache2ctl test\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"m\xf3dulos",children:"M\xf3dulos"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Directiva para cargar m\xf3dulos (previamente compilados)"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"LoadModule"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Instalar / Desinstalar m\xf3dulos"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"apt-get install libapache2-mod-gnutls\r\napt-get remove libapache2-mod-gnutls\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Activar / Desactivar modulos (Debian y derivados)"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"a2enmod / a2dismod + nombre-modulo"})}),"\n",(0,r.jsx)(n.p,{children:"Los modulos tienen dos ficheros:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:".conf para la configuraci\xf3n"}),"\n",(0,r.jsx)(n.li,{children:".load para la carga del m\xf3dulo"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Comprobar m\xf3dulos est\xe1ticos y din\xe1micos"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"apache2ctl -M"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Est\xe1ticos"})," Compilados en el core de Apache"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Din\xe1micos"})," Se puede a\xf1adir/eliminar"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Directorio de los m\xf3dulos disponibles"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"etc/apache2/mods-available"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Directorio para enlaces simbolicos a los m\xf3dulos disponibles"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"etc/apache2/mods-enabled"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Habilitar UTF-8"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"sudo vim /etc/apache2/conf-available/charset.conf"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Operaciones sobre m\xf3dulos"})}),"\n"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Operacion"}),(0,r.jsx)(n.th,{children:"Forma gen\xe9rica"}),(0,r.jsx)(n.th,{children:"Ejemplo"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Instalar"}),(0,r.jsx)(n.td,{children:"apt-get install nombre-modulo"}),(0,r.jsx)(n.td,{children:"apt-get install libapache2-mod-gnutls"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Desinstalar"}),(0,r.jsx)(n.td,{children:"apt-get remove nombre-modulo"}),(0,r.jsx)(n.td,{children:"apt-get remove libapache2-mod-gnutls"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Habilitar"}),(0,r.jsx)(n.td,{children:"a2enmod nombre-modulo-apache"}),(0,r.jsx)(n.td,{children:"a2enmod ssl"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Deshabilitar"}),(0,r.jsx)(n.td,{children:"a2dismod nombre-modulo-apache"}),(0,r.jsx)(n.td,{children:"a2dismod ssl"})]})]})]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Recargar apache para habiliar los m\xf3dulo"}),"s"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"/etc/init.d/apache2 restart\r\n# O...\r\n/etc/init.d/apache2 reload\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"tipos-mime",children:"Tipos MIME"}),"\n",(0,r.jsx)(n.p,{children:"Multipurpose Internet Mail Extensions"}),"\n",(0,r.jsx)(n.p,{children:"Especifica c\xf3mo un programa debe transferir archivos de texto, imagen, audio, v\xeddeo o cualquier archivo que no est\xe9 codificado en US-ASCII.\r\nSe especifican en las cabeceras HTTP"}),"\n",(0,r.jsx)(n.p,{children:"Respuesta del servidor:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"Content-Type: text/html, application/json\n"})}),"\n",(0,r.jsx)(n.p,{children:"Petici\xf3n del cliente:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"Accept: text/html, application/json\r\n# Aceptar cualquier tipo MIME\r\nAccept: */*\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Configuraci\xf3n de Apache para los tipos MIME"})}),"\n",(0,r.jsxs)(n.p,{children:["M\xf3dulo: ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.em,{children:"mod_mime"})})," (activo por defecto)"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Directivas interesantes de este m\xf3dulo:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ForceType"}),' Todos los archivos de un directorio se sirven con el tipo especificado. Valido en "Directory, Files, Location y .htaccess"']}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"    ForceType image/png\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"AddType"})," Especifica el tipo MIME que se debe usar para una o m\xe1s extensiones."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"# Para extensiones .imagen a .png\r\n    AddType image/png imagen\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"autenticaci\xf3n-y-autorizaci\xf3n",children:"Autenticaci\xf3n y autorizaci\xf3n"}),"\n",(0,r.jsx)(n.p,{children:"Esquemas de autenticaci\xf3n HTTP:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Basic"})," Se envian usuario y clave codificados en BASE64. Recomendado SSL (HTTPS)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Digest"})," Se utilizan funciones Hash para enviar las credenciales de acceso"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Proceso de autenticaci\xf3n"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"El servidor, cuando el cliente solicita un recurso, le pedir\xe1 al cliente web las credenciales de acceso"}),"\n",(0,r.jsx)(n.li,{children:"El cliente web recibe la petici\xf3n y solicita al usuario las credenciales"}),"\n",(0,r.jsx)(n.li,{children:"El cliente web env\xeda las credenciales al servidor y si los datos son correctos responder\xe1 con el recurso solicitado"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"autenticaci\xf3n",children:"Autenticaci\xf3n"}),"\n",(0,r.jsx)(n.p,{children:"M\xf3dulos:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"mod_auth_basic"})," Permite que el servidor solicite al cliente las credenciales con el m\xe9todo Basic"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"mod_auth_digest"})," Permite que el servidor solicite al cliente las credenciales con el m\xe9todo Digest"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Los datos de los usuarios se pueden almacenar en:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Base de datos. M\xf3dulos: ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.em,{children:"mod_authn_dbd y mod_dbd"})})]}),"\n",(0,r.jsxs)(n.li,{children:["Servicio de directorio LDAP. M\xf3dulos: ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.em,{children:"mod_authnz_ldapd"})})]}),"\n",(0,r.jsxs)(n.li,{children:["En archivo. M\xf3dulo: ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.em,{children:"mod_authn_file"})})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Modo de limitar los recursos"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Para usuarios concretos. M\xf3dulo: ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.em,{children:"mod_authz_user"})})]}),"\n",(0,r.jsxs)(n.li,{children:["Para grupos. M\xf3dulo: ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.em,{children:"mod_authz_groupfile"})})]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"ejemplo-con-esquema-basic",children:"Ejemplo con esquema Basic"}),"\n",(0,r.jsx)(n.p,{children:"M\xf3dulos: mod_auth_basic, mod_authn_file, mod_authz_user"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Crear un archivo con usuarios y contrase\xf1as"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"htpasswd -c /etc/apache2/user_list admin\r\n# Nos solicitar\xe1 la contrase\xf1a\r\n# Si el archivo esta creado con anterioridad el -c nos e utiliza\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Configurar Apache para usar autenticaci\xf3n sobre un directorio. En una secci\xf3n ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.em,{children:"Directory"})})," o en un archivo ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.em,{children:".htaccess"})})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'# Indicar el Directory donde se efecuara el control de acceso\r\nAuthType Basic\r\nAuthName "Debe introducir usuario y contrase\xf1a para seguir"\r\nAuthBasicProvider file\r\nAuthUserFile /etc/apache2/user_list\r\nRequire user admin # otros usuarios separados por espacio\r\n# Require valid-user (para todos los usuarios existentes en la lista)\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"autenticaci\xf3n-mediante-ldap",children:"Autenticaci\xf3n mediante LDAP"}),"\n",(0,r.jsx)(n.p,{children:"M\xf3dulos: mod_ldap y mod_authnz_ldap"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Habilitar los m\xf3dulos"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo a2enmod ldap\r\nsudo a2enmod authnz_ldap\n"})}),"\n",(0,r.jsx)(n.h4,{id:"existen-otros-m\xf3dulos-de-autenticaci\xf3n-anon-dbd-dbm-file-socache",children:"Existen otros m\xf3dulos de autenticaci\xf3n: anon, dbd, dbm, file, socache"}),"\n",(0,r.jsx)(n.h3,{id:"otras-formas-de-limitar-los-recursos",children:"Otras formas de limitar los recursos"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"# Denegar acceso a todo el mundo\r\nRequire all denied\r\n# Aceptar acceso a todo el mundo\r\nRequire all granted\r\n# Habiliar acceso a una IP Cliente concreta\r\nRequire ip 10.20.30.40\r\n# Deshabilitar acceso ana IP Cliente concreta\r\nRequire not ip 10.20.30.40\r\n# Rango de IPs\r\nRequire ip 10.20\n"})}),"\n",(0,r.jsx)(n.p,{children:"Todos los casos anteriores devuelven el c\xf3digo de estado 403 (acceso no permitido o prohibido)"}),"\n",(0,r.jsx)(n.h3,{id:"redirecci\xf3n",children:"Redirecci\xf3n"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"ServerName www.miejemplo.local\r\nDocumentRoot /var/www/html/diretoriolimitado\r\nRedirect /recursoantiguo http://www.miejemplo.local/recursonuevo\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"ssltls---https",children:"SSL/TLS - HTTPS"}),"\n",(0,r.jsxs)(n.p,{children:["M\xf3dulo: ",(0,r.jsx)(n.strong,{children:"mod_ssl"})]}),"\n",(0,r.jsx)(n.p,{children:"Este m\xf3dulo proporciona SSL y TLS. Esta basado en OpenSSL"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Activar el m\xf3dulo SSL"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"a2enmod ssl\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Crear un nuevo VirtualHost que contenga:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"SSLEngine on\r\nSSLCertificateFile /etc/ssl/certs/ssl-cert-snakeoil.pem\r\nSSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"generar-certificado-digital-autofirmado",children:"Generar certificado digital autofirmado"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Instalar OpenSSL"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo apt-get install openssl\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Generar el certificado autofirmado junto a la clave privada"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"make-ssl-cert /usr/share/ssl-cert/ssleay.cnf /etc/apache2/my-ssl/apache.pem\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Modificar el VirtualHost para la nueva clave y certificado"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"SSLEngine on\r\nSSLCertificateFile /etc/apache2/my-ssl/apache.pem\r\nSSLCertificateKeyFile /etc/apache2/my-ssl/apache.pem\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"generar-certificados-con-openssl",children:"Generar certificados con OpenSSL"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Generar la clave privada y el archivo de solicitud de certificado"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo openssl req -new -nodes -keyout test.key -out test.csr\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Autofirmar el certificado"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo openssl x509 -in test.csr -out test.crt -req -signkey test.key -days 3650\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Modificar el VirtualHost para la nueva clave y certificado"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"SSLEngine on\r\nSSLCertificateFile /etc/apache2/my-ssl/test.crt\r\nSSLCertificateKeyFile /etc/apache2/my-ssl/test.key\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"log",children:"Log"}),"\n",(0,r.jsx)(n.h3,{id:"log-de-apache-en-formato-clf",children:"Log de apache en formato CLF"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'192.168.200.100  - [05/May/2011:17:19:18 +0200] "GET /index.html HTTP/1.1" 200 20\r\n# - (campo sin valor)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"comprobar-logs-en-linux",children:"Comprobar logs en Linux"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"tail -f nombre-archivo-registro.log\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"campos(especificadores)"}),(0,r.jsx)(n.th,{children:"definicion"}),(0,r.jsx)(n.th,{children:"Ejemplo"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"host (%h)"}),(0,r.jsx)(n.td,{children:"Equipo cliente"}),(0,r.jsx)(n.td,{children:"192.168.200.100"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"ident (%l)"}),(0,r.jsx)(n.td,{children:"Cuando el cliente ejecuta identd y la directiva IdentityCheck esta activa"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"authuser (%u)"}),(0,r.jsx)(n.td,{children:"URL requiere autenticaci\xf3n"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"date (%t)"}),(0,r.jsxs)(n.td,{children:["Formato: [dia/mes/a\xf1o:hora:minuto",":segundo"," zona]"]}),(0,r.jsx)(n.td,{children:"[05/May/2011:17:19:18 +0200]"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"request (%r)"}),(0,r.jsx)(n.td,{children:"Recurso solicitado"}),(0,r.jsx)(n.td,{children:"/index.html"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"status (%s O %>s)"}),(0,r.jsx)(n.td,{children:"c\xf3digo de estado devuelto"}),(0,r.jsx)(n.td,{children:"200"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"bytes (%b)"}),(0,r.jsx)(n.td,{children:"bytes devueltos al cliente"}),(0,r.jsx)(n.td,{children:"20"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"directivas-para-archivos-de-registro",children:"Directivas para archivos de registro"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Directiva"}),(0,r.jsx)(n.th,{children:"Sintaxis"}),(0,r.jsx)(n.th,{children:"Uso"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"TransferLog"}),(0,r.jsx)(n.td,{children:"TransferLog nombre-fichero | tuber\xeda a programa de registro"}),(0,r.jsxs)(n.td,{children:["1\xba. LogFormat",(0,r.jsx)("br",{}),"2\xba.Archivo donde se guardar\xe1n los logs"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"LogFormat"}),(0,r.jsx)(n.td,{children:"LogFormat format | alias_logformat [alias_logformat]"}),(0,r.jsxs)(n.td,{children:['1\xba LogFormat "%h %l %u %t %r" %>s %0" common',(0,r.jsx)("br",{}),"common = alias",(0,r.jsx)("br",{}),"Es habitual definir formatos de log globalmente"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"ErrorLog"}),(0,r.jsx)(n.td,{children:"ErrorLog nombre-fichero"}),(0,r.jsx)(n.td,{children:"ErrorLog logs/nombre-fichero.log"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"CustomLog"}),(0,r.jsx)(n.td,{children:"CustomLog nombre-fichero | tuber\xeda-programa-registro formato | nickname [env opcional]"}),(0,r.jsxs)(n.td,{children:['Custom logs/acceso-temporal.log "formato..."',(0,r.jsx)("br",{}),"CustomLog logs/acceso-temporal.log common"]})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"rotar-los-archivos-de-log-para-controlar-su-tama\xf1o-en-el-tiempo",children:"Rotar los archivos de log para controlar su tama\xf1o en el tiempo"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"rotatelogs"})," Apache"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"logrotate"})," GNU/Linux"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Ejemplos:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'CustomLog "|/ruta_rotatelogs ruta_log_a_rotar numbero_segundos | tama\xf1o m\xe1ximo MB" alias_logformat\r\n\r\n# Sufijo, MB m\xe1ximos por archivo y N\xba de archivos en disco\r\nCustomLog "|/usr/bin/rotatelogs -n 10 /var/log/accesslog.%Y-%m-%d-%H_%M_%S 5M" common\r\n\r\n# Apache >= 2.4\r\nCustomLog "|$rotatelogs -n 10 /var/log/apache2/access.log 5M" common\n'})}),"\n",(0,r.jsx)(n.h3,{id:"encontrar-rotatelogs-en-linux-o-instalar-en-caso-necesario",children:"Encontrar rotatelogs en Linux o instalar en caso necesario"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"whereis rotatelogs\r\n# A veces ser\xe1 necesario instalar....\r\nsudo apt-get install apache2-utils\n"})}),"\n",(0,r.jsx)(n.h3,{id:"uso-de-logrotate-linux",children:"Uso de logrotate (Linux)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Configuraci\xf3n global: ",(0,r.jsx)(n.strong,{children:"/etc/logrotate.conf"})]}),"\n",(0,r.jsxs)(n.li,{children:["Configuraci\xf3n espec\xedfica: ",(0,r.jsx)(n.strong,{children:"/etc/logrotate.d/apache2"})]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"# Comprobar la correcta configuraci\xf3n\r\n/usr/sbin/logrotate -d /etc/logrotate.d/apache2\r\n\r\n# Forzar la ejecuci\xf3n de logrotate\r\n/usr/sbin/logrotate -f /etc/logrotate.conf\r\n\r\n# Ejecutar logrotate con tareas cron\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"tomcat",children:"Tomcat"}),"\n",(0,r.jsx)(n.h3,{id:"instalaci\xf3n-desde-repositorio",children:"Instalaci\xf3n desde repositorio"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Comprobar los paquetes existentes en el repositorio"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:" apt-cache search tomcat -n\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Comprobar las dependencias de tomcat"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"apt-cache depends tomcat9 tomcat9-common\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"OPCIONAL"}),". Instalar el JDK (contiene entorno de desarrollo y ejecuci\xf3n)"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:" # Comprobar las dependencias del JDK por defecto\r\n apt-cache depends default-jdk-headless\r\n # Instalar el JDK\r\n sudo apt-get install default-jdk-headless\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Instalar Tomcat. Se instalaran las dependencias necesarias (Ej. JRE)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo apt-get install tomcat9 tomcat9-common tomcat9-admin tomcat9-docs\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Comprobar donde se instala el JDK"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"# Compruebo el nombre del paquete\r\nsudo dpkg -l | grep openjdk\r\n# Compruebo los directorios y ****ficheros**** del paquete\r\nsudo dpkg -L nombre-paquete\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Compruebo rutas de instalaci\xf3n de Tomcat"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo dpkg -L <nombre-paquete-tomcat>\r\n# /var/lib/tomcat9 --\x3e carpeta principal\r\n# /etc/tomcat9 --\x3e carpeta de configuraci\xf3n\r\n# /var/log/tomcat9 --\x3e logs del servidor\r\n# /var/lib/tomcat9/webapps --\x3e aplicaciones web en formato expandido\r\n# /usr/share/tomcat/bin --\x3e scripts de tomcat (iniciar, parar, configuraci\xf3n, etc)\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Arrancar / Parar el servicio de tomcat"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo service tomcat9 start\r\nsudo service tomcat9 stop\r\nsudo service tomcat9 restart\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Comprobar en \\IP:\\PUERTO que se esta ejecutando correctamente"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"instalaci\xf3n-manual",children:"Instalaci\xf3n manual"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Instalar el JDK compatible a la ",(0,r.jsx)(n.strong,{children:"versi\xf3nd"})," de tomcat que se utilizar\xe1"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Ir al diretorio /opt y descargar el binario del core de tomcat"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo wget url-binarios-core-tomcat\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Extraer los archivos"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo tar xfz fichero-descargado.gz\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Cambiar los permisos del directorio al usuario deseado o dejar permisos root"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo chown -R usuario:grupo-usuario directorio\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Ejercutar Tomcat"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"sudo sh /opt/directorio-tomcat/bin/catalina.sh start\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Comprobar su ejecuci\xf3n en \\IP:\\PUERTO"}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>c});var r=s(6540);const i={},a=r.createContext(i);function l(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);