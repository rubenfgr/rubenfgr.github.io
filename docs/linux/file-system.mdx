---
sidebar_position: 3
---

# Linux. Sistema de ficheros

## Shell. Listado de directorios y archivos

```sh
# listar directorios y archivos
ls
# listar directorios y archivos con detalle
ls -l
# listar directorios y archivos con detalle y tamaño
ls -lh
# listar directorios y archivos con detalle y tamaño en formato legible
ls -lah
# listar directorios y archivos con detalle y tamaño en formato legible y ordenados por fecha
ls -lhat
# listar directorios y archivos con detalle y tamaño en formato legible y ordenados por fecha en orden inverso
ls -lhart
```

## Shell. Crear directorios y ficheros

```sh
# Crear directorio
mkdir directorio
# Crear directorio con subdirectorios
mkdir -p directorio/subdirectorio
# Crear fichero
touch fichero
# Crear fichero con contenido
echo "contenido" > fichero
# Crear fichero con contenido y añadir contenido
echo "contenido" >> fichero
```

## Shell. Editores de texto

```sh
# nano
nano fichero
# vim
vim fichero
# emacs
emacs fichero
# pico
pico fichero
```

## Shell. Visualizar contenido de ficheros

```sh
# Tipo de contenido del fichero
file fichero
# Visualizar contenido de fichero
cat fichero
# Visualizar contenido de fichero con número de línea
cat -n fichero
# Visualizar contenido de fichero con número de línea y mostrar caracteres no imprimibles
cat -T fichero
# Visualizar contenido de fichero con número de línea y mostrar caracteres no imprimibles
cat -Tn fichero
# Visualizar linea a linea
more fichero
# Visualizar linea a linea avanzado
less fichero # h ayuda, q salir, /buscar, n siguiente, N anterior

```

## Shell. Copiar, mover y borrar ficheros

```sh
# Copiar fichero
cp fichero destino
# Copiar fichero con detalle
cp -v fichero destino
# Copiar fichero con detalle y confirmación
cp -vi fichero destino
# Actualizar fichero
cp -u fichero destino
```

## Shell. Copiar, mover y borrar directorios

```sh
# Copiar directorio
cp -r directorio destino
# Copiar directorio con detalle
cp -rv directorio destino
# Copiar directorio con detalle y confirmación
cp -rvi directorio destino
# Actualizar directorio
cp -ru directorio destino
```

## Shell. Mover ficheros y directorios

```sh
# Mover fichero
mv fichero destino
# Mover fichero con detalle
mv -v fichero destino
# Mover fichero con detalle y confirmación
mv -vi fichero destino
# Actualizar fichero
mv -u fichero destino
```

## Shell. Borrar ficheros y directorios

```sh
# Borrar fichero
rm fichero
# Borrar fichero con detalle
rm -v fichero
# Borrar fichero con detalle y confirmación
rm -vi fichero
# Borrar fichero con detalle y confirmación forzoso
rm -rfvi fichero
# Borrar directorio
rm -r directorio
# Borrar directorio con detalle
rm -rv directorio
# Borrar directorio con detalle y confirmación
rm -rvi directorio
# Borrar directorio con detalle y confirmación forzoso
rm -rfvi directorio
```

## Shell. Encontrar ficheros y directorios

```sh
# Encontrar fichero
find directorio -name fichero
# Encontrar directorio
find directorio -type d -name subdirectorio
# Encontrar ficheros excluyendo un directorio concreto
find directorio -name fichero -not -path "directorio/excluir"
# Encontrar fichero con detalle
find directorio -name fichero -ls
# Encontrar fichero con detalle y permisos
find directorio -name fichero -ls -perm 777
# Encontrar fichero ocultando errores
find directorio -name fichero 2> /dev/null
# Encontrar fichero por usuario
find directorio -name fichero -user usuario
# Encontrar ficheros con tamaño mayor a 1M
find directorio -size +1M
# Encontrar ficheros con tamaño menor a 1M
find directorio -size -1M
# Encontrar ficheros con tamaño igual a 1M
find directorio -size 1M
# Encontrar ficheros con tamaño mayor a 1M y menor a 2M
find directorio -size +1M -size -2M
# Encontrar ficheros con tamaño mayor a 1M y menor a 2M con detalle
find directorio -size +1M -size -2M -ls
# Encontrar ficheros que contienen texto
grep -r "texto" directorio
# Encontrar ficheros que contienen texto con detalle
grep -r "texto" directorio -n
# Encontrar ficheros que terminan en .txt
find directorio -name "*.txt"
```

## Shell. Ejercicios de búsqueda
    
```sh
# Buscar el comando ls
find / -name ls 2> /dev/null
# Buscar directorios con nombre firefox 
find / -name firefox -type d 2> /dev/null
# Buscar el usuario propietario del fichero shadow excluyendo los ficheros que se encuentren el el directorio /snap
find / -name shadow ! -path "/snap/*" -ls 2> /dev/null
find / -path /snap -prune -o -name shadow -exec ls -l {} \ 2>/dev/null
```

## Shell. Principales directorios de Linux

```sh
# Arbol de directorios de primer nivel
tree / -L 1
```

Información de los principales directorios de Linux:
- `/bin`: Contiene los binarios de los comandos básicos del sistema.
- `/boot`: Contiene los ficheros necesarios para el arranque del sistema.
- `/dev`: Contiene los ficheros de dispositivos.
- `/etc`: Contiene los ficheros de configuración del sistema.
- `/home`: Contiene los directorios de los usuarios.
- `/lib`: Contiene las librerías compartidas.
- `/media`: Contiene los puntos de montaje de los dispositivos extraíbles.
- `/mnt`: Contiene los puntos de montaje de los dispositivos.
- `/opt`: Contiene los paquetes de software adicionales.
- `/proc`: Contiene información sobre los procesos del sistema.
- `/root`: Contiene el directorio del usuario root.
- `/run`: Contiene los ficheros temporales del sistema.
- `/sbin`: Contiene los binarios de los comandos del sistema.
- `/srv`: Contiene los datos de los servicios.
- `/sys`: Contiene información sobre el sistema.
- `/tmp`: Contiene los ficheros temporales.
- `/usr`: Contiene los ficheros de los usuarios.
- `/var`: Contiene los ficheros variables del sistema.

# Shell. Tips

```sh
# Proceso actual
echo $$
# Último proceso
echo $!
# Último comando
echo $?
# Ver procesos en ejecución
ps
# Limitar la memoria de un proceso concreto por su PID
prlimit --as=1000 --pid 1234
```