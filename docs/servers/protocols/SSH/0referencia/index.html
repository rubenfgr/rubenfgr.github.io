<!doctype html>
<html lang="es" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-servers/protocols/SSH/0referencia" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Referencia | Rub√©n Rosales</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://rubenfgr.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://rubenfgr.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://rubenfgr.github.io/docs/servers/protocols/SSH/0referencia"><meta data-rh="true" property="og:locale" content="es"><meta data-rh="true" name="docusaurus_locale" content="es"><meta data-rh="true" name="docsearch:language" content="es"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Referencia | Rub√©n Rosales"><meta data-rh="true" name="description" content="Instalaci√≥n de un servidor SSH"><meta data-rh="true" property="og:description" content="Instalaci√≥n de un servidor SSH"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://rubenfgr.github.io/docs/servers/protocols/SSH/0referencia"><link data-rh="true" rel="alternate" href="https://rubenfgr.github.io/docs/servers/protocols/SSH/0referencia" hreflang="es"><link data-rh="true" rel="alternate" href="https://rubenfgr.github.io/docs/servers/protocols/SSH/0referencia" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Rub√©n Rosales RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Rub√©n Rosales Atom Feed">




<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><link rel="stylesheet" href="/assets/css/styles.28882af3.css">
<script src="/assets/js/runtime~main.362c132c.js" defer="defer"></script>
<script src="/assets/js/main.c6c3bd51.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Saltar al contenido principal"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Saltar al contenido principal</a></div><nav aria-label="Principal" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Alternar barra lateral" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Rub√©n Rosales Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Rub√©n Rosales Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Rub√©n Rosales</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/category/cloud">Documentaci√≥n</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/rubenfgr" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Cambiar entre modo oscuro y claro (actualmente modo claro)" aria-label="Cambiar entre modo oscuro y claro (actualmente modo claro)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="search-icon">üîç</div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Volver al principio" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Barra lateral de Documentos" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/cloud">Cloud</a><button aria-label="Ampliar la categor√≠a &#x27;Cloud&#x27; de la barra lateral" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/cms">CMS</a><button aria-label="Ampliar la categor√≠a &#x27;CMS&#x27; de la barra lateral" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/bases-de-datos">Bases de datos</a><button aria-label="Ampliar la categor√≠a &#x27;Bases de datos&#x27; de la barra lateral" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/dise√±o-gr√°fico">Dise√±o Gr√°fico</a><button aria-label="Ampliar la categor√≠a &#x27;Dise√±o Gr√°fico&#x27; de la barra lateral" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/docker">Docker</a><button aria-label="Ampliar la categor√≠a &#x27;Docker&#x27; de la barra lateral" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/documentaci√≥n">Documentaci√≥n</a><button aria-label="Ampliar la categor√≠a &#x27;Documentaci√≥n&#x27; de la barra lateral" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/git">Git</a><button aria-label="Ampliar la categor√≠a &#x27;Git&#x27; de la barra lateral" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/iot--maker">IOT &amp; Maker</a><button aria-label="Ampliar la categor√≠a &#x27;IOT &amp; Maker&#x27; de la barra lateral" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/open-source">Open Source</a><button aria-label="Ampliar la categor√≠a &#x27;Open Source&#x27; de la barra lateral" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/recursos">Recursos</a><button aria-label="Ampliar la categor√≠a &#x27;Recursos&#x27; de la barra lateral" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/servidores">Servidores</a><button aria-label="Colapsar categor√≠a &#x27;Servidores&#x27; de barra lateral" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/apache">Apache</a><button aria-label="Ampliar la categor√≠a &#x27;Apache&#x27; de la barra lateral" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/nginx">Nginx</a><button aria-label="Ampliar la categor√≠a &#x27;Nginx&#x27; de la barra lateral" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/otros">Otros</a><button aria-label="Ampliar la categor√≠a &#x27;Otros&#x27; de la barra lateral" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/protocolos">Protocolos</a><button aria-label="Colapsar categor√≠a &#x27;Protocolos&#x27; de barra lateral" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/servers/protocols/FTP/vsftpd_ubuntu20">FTP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/servers/protocols/MQTT/emqx">MQTT</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/servers/protocols/SSH/0referencia">SSH</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/servers/protocols/SSH/0referencia">Referencia</a></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/sistemas">Sistemas</a><button aria-label="Ampliar la categor√≠a &#x27;Sistemas&#x27; de la barra lateral" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/desarrollo-web">Desarrollo WEB</a><button aria-label="Ampliar la categor√≠a &#x27;Desarrollo WEB&#x27; de la barra lateral" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="P√°gina de Inicio" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/servidores"><span itemprop="name">Servidores</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/protocolos"><span itemprop="name">Protocolos</span></a><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">SSH</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Referencia</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">En esta p√°gina</button></div><div class="theme-doc-markdown markdown"><header><h1>Referencia</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="instalaci√≥n-de-un-servidor-ssh">Instalaci√≥n de un servidor SSH<a class="hash-link" aria-label="Enlace directo al Instalaci√≥n de un servidor SSH" title="Enlace directo al Instalaci√≥n de un servidor SSH" href="/docs/servers/protocols/SSH/0referencia#instalaci√≥n-de-un-servidor-ssh">‚Äã</a></h2>
<p>Habitualmente los equipos con alguna variedad de GNU/Linux traen un servidor ssh instalado, en el caso de los sistemas Debian y derivados el paquete que proporciona el servidor ssh se llama openssh-server. Podemos comprobar si ya est√° instalado mediante la instrucci√≥n:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dpkg -l |grep openssh-server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ii  openssh-server            ......</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>El fichero de configuraci√≥n de este servicio se encuentra habitualmente en /etc/ssh/sshd_config y contiene las opciones de configuraci√≥n.</p>
<p>Las opciones aplicadas las obtendr√≠amos mediante:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">grep -v &#x27;^$\|^#&#x27; /etc/ssh/sshd_config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ChallengeResponseAuthentication no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UsePAM yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">X11Forwarding yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PrintMotd no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AcceptEnv LANG LC_*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Subsystem    sftp    /usr/lib/openssh/sftp-server</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Sin embargo, en el caso de ssh hay muchas opciones que no vienen definidas y que se asume un valor por defecto, lo que puede resultar confuso. Sin embargo podemos utilizar la opci√≥n ‚Äú-T: extended test mode‚Äù que comprueba la validez del fichero de configuraci√≥n y muestra las opciones efectivas que se aplican (las que est√°n habilitadas de forma expl√≠cita y las que tienen valores por defecto (en sistemas GNU/linux sshd s√≥lo puede ejecutarlo un usuario privilegiado):</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sshd -T</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">port 22</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">addressfamily any</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">listenaddress [::]:22</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">listenaddress 0.0.0.0:22</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usepam yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logingracetime 120</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x11displayoffset 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maxauthtries 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maxsessions 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clientaliveinterval 120</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clientalivecountmax 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">streamlocalbindmask 0177</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">permitrootlogin without-password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ignorerhosts yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ignoreuserknownhosts no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hostbasedauthentication no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hostbasedusesnamefrompacketonly no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pubkeyauthentication yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kerberosauthentication no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kerberosorlocalpasswd yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kerberosticketcleanup yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gssapiauthentication no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gssapikeyexchange no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gssapicleanupcredentials yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gssapistrictacceptorcheck yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gssapistorecredentialsonrekey no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">passwordauthentication yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kbdinteractiveauthentication no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">challengeresponseauthentication no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">printmotd no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">printlastlog yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x11forwarding yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x11uselocalhost yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">permittty yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">permituserrc yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">strictmodes yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tcpkeepalive yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">permitemptypasswords no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">permituserenvironment no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">compression yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gatewayports no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usedns no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">allowtcpforwarding yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">allowagentforwarding yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">disableforwarding no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">allowstreamlocalforwarding yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">streamlocalbindunlink no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">useprivilegeseparation sandbox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fingerprinthash SHA256</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pidfile /run/sshd.pid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">xauthlocation /usr/bin/xauth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ciphers chacha20-poly1305@openssh.com,aes128-ctr, ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">macs umac-64-etm@openssh.com,umac-128-etm@openssh.com, ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">versionaddendum none</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kexalgorithms curve25519-sha256,curve25519-sha256@libssh.org, ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hostbasedacceptedkeytypes ecdsa-sha2-nistp256-cert-v01@openssh.com, ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hostkeyalgorithms ecdsa-sha2-nistp256-cert-v01@openssh.com, ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pubkeyacceptedkeytypes ecdsa-sha2-nistp256-cert-v01@openssh.com, ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loglevel INFO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">syslogfacility AUTH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">authorizedkeysfile .ssh/authorized_keys .ssh/authorized_keys2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hostkey /etc/ssh/ssh_host_rsa_key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hostkey /etc/ssh/ssh_host_ecdsa_key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hostkey /etc/ssh/ssh_host_ed25519_key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">acceptenv LANG</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">acceptenv LC_*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">authenticationmethods any</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subsystem sftp /usr/lib/openssh/sftp-server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maxstartups 10:30:100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">permittunnel no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ipqos lowdelay throughput</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rekeylimit 0 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">permitopen any</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="autenticaci√≥n-con-usuario-y-contrase√±a">Autenticaci√≥n con usuario y contrase√±a<a class="hash-link" aria-label="Enlace directo al Autenticaci√≥n con usuario y contrase√±a" title="Enlace directo al Autenticaci√≥n con usuario y contrase√±a" href="/docs/servers/protocols/SSH/0referencia#autenticaci√≥n-con-usuario-y-contrase√±a">‚Äã</a></h2>
<p>El m√©todo inicial de autenticaci√≥n es utilizando los usuarios del sistema y las contrase√±as que tienen almacenadas en el sistema. A SSH no le afecta la forma en la que el sistema almacena las contrase√±as, entra en la forma en la que se almacenan las contrase√±as (fichero, LDAP, etc.).</p>
<p>Las opciones de configuraci√≥n que afectan en este caso son las siguientes:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">passwordauthentication yes|no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">challengeresponseauthentication yes|no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">permitemptypasswords yes|no</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Te√≥ricamente challengeresponseauthentication es un mecanismo m√°s complejo que permite preguntar al usuario otras cuestiones, no s√≥lo la contrase√±a, pero en la pr√°ctica se suele preguntar la contrase√±a.</p>
<p>En sistemas GNU/Linux se a√±ade la opci√≥n</p>
<p><code>usepam yes</code>
Que permite utilizar el subsistema PAM como mecanismo de autenticaci√≥n.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ejercicio-simple-de-acceso-con-usuariocontrase√±a">Ejercicio simple de acceso con usuario/contrase√±a<a class="hash-link" aria-label="Enlace directo al Ejercicio simple de acceso con usuario/contrase√±a" title="Enlace directo al Ejercicio simple de acceso con usuario/contrase√±a" href="/docs/servers/protocols/SSH/0referencia#ejercicio-simple-de-acceso-con-usuariocontrase√±a">‚Äã</a></h3>
<p>Accedemos a un servidor remoto con:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh usuario@172.22.200.175</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The authenticity of host &#x27;172.22.200.175 (172.22.200.175)&#x27; can&#x27;t be established.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ECDSA key fingerprint is SHA256:Bsv9OS7Qf94ANguOiDLNPHn7J+XlwisWZydmfqa4QMo.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Are you sure you want to continue connecting (yes/no)?</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Para verificar el servidor, en lugar de mostrarnos la clave p√∫blica completa, nos muestra la huella (fingerprint) de la clave p√∫blica del servidor, que no es m√°s que un hash de la clave p√∫blica, en este caso utlizando SHA256. Podemos comprobar la correspondencia entre la clave p√∫blica y la huella mediante la instrucci√≥n:</p>
<p>ssh-keygen -l -E sha256 -f fichero_con_clave_publica
Podr√≠amos hablar con detalle de la forma efectiva de verificar las claves p√∫blicas, pero en este momento aceptamos la clave que se nos ofrece y por tanto tecleamos ‚Äúyes‚Äù y a continuaci√≥n nos pide la contrase√±a de acceso, la introducimos y accedemos a una shell en el equipo remoto:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Warning: Permanently added &#x27;172.22.200.175&#x27; (ECDSA) to the list of known hosts.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usuario@172.22.200.175&#x27;s password: **********</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Last login: Fri Feb 16 17:34:41 2018 from 172.23.0.22</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usuario@host:~$</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ejecuci√≥n-remota">Ejecuci√≥n remota<a class="hash-link" aria-label="Enlace directo al Ejecuci√≥n remota" title="Enlace directo al Ejecuci√≥n remota" href="/docs/servers/protocols/SSH/0referencia#ejecuci√≥n-remota">‚Äã</a></h3>
<p>SSH permite ejecutar una orden remotamente de forma no interactiva, lo que resulta muy c√≥modo cuando hay que realizar tareas muy espec√≠ficas en un equipo remoto. Por ejemplo:
<code>ssh usuario@172.22.200.175 sudo apt update</code></p>
<p>Tambi√©n se pueden encadenar varias √≥rdenes o ejecutar un script:
<code>ssh usuario@172.22.200.175 &#x27;sudo apt update &amp;&amp; sudo apt upgrade&#x27;</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="consideraciones-acerca-de-root">Consideraciones acerca de root<a class="hash-link" aria-label="Enlace directo al Consideraciones acerca de root" title="Enlace directo al Consideraciones acerca de root" href="/docs/servers/protocols/SSH/0referencia#consideraciones-acerca-de-root">‚Äã</a></h3>
<p>Se puede restringir el acceso con el usuario root utilizando contrase√±a, aspecto importante desde el punto de vista de seguridad, por lo que hoy en d√≠a habitualmente se utiliza la opcion:</p>
<p><code>PermitRootLogin without-password</code></p>
<p>En caso de que quisi√©ramos permitir acceder con el usuario root y contrase√±a, deber√≠amos poner esta opci√≥n a ‚Äúyes‚Äù.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="otras-opciones">Otras opciones<a class="hash-link" aria-label="Enlace directo al Otras opciones" title="Enlace directo al Otras opciones" href="/docs/servers/protocols/SSH/0referencia#otras-opciones">‚Äã</a></h3>
<p>No espec√≠ficas del acceso con usuario y contrase√±a, pero adecuadas para empezar:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PrintLastLog yes|no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PrintMotd yes|no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Banner Ruta_a_fichero</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="autenticaci√≥n-con-claves-p√∫blicaprivada-con-frase-de-paso">Autenticaci√≥n con claves p√∫blica/privada con frase de paso<a class="hash-link" aria-label="Enlace directo al Autenticaci√≥n con claves p√∫blica/privada con frase de paso" title="Enlace directo al Autenticaci√≥n con claves p√∫blica/privada con frase de paso" href="/docs/servers/protocols/SSH/0referencia#autenticaci√≥n-con-claves-p√∫blicaprivada-con-frase-de-paso">‚Äã</a></h3>
<p>Aunque el mecanismo m√°s f√°cil de entender al utilizar ssh es la autenticaci√≥n del usuario mediante la contrase√±a en el equipo remoto, el mecanismo m√°s ‚Äúnatural‚Äù y probablemente m√°s habitual es la autenticaci√≥n mediante un par de claves p√∫blica/privada.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creaci√≥n-de-la-clave-privada">Creaci√≥n de la clave privada<a class="hash-link" aria-label="Enlace directo al Creaci√≥n de la clave privada" title="Enlace directo al Creaci√≥n de la clave privada" href="/docs/servers/protocols/SSH/0referencia#creaci√≥n-de-la-clave-privada">‚Äã</a></h3>
<p>Para crear la clave privada utilizaremos la herramienta ssh-keygen, especificando el algoritmo que deseamos utilizar mediante el par√°metro -t (dsa | ecdsa | ed25519 | rsa | rsa1), por ejemplo:</p>
<p><code>ssh-keygen -t ecdsa</code></p>
<p>Se crear√° un di√°logo mediante el cual nos pedir√° una frase de paso para proteger la clave privada, paso que ignoraremos de momento y explicaremos con detalle en la siguiente secci√≥n:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Generating public/private ecdsa key pair.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter file in which to save the key (/home/alberto/.ssh/id_ecdsa): [ENTER]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter passphrase (empty for no passphrase): [ENTER]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter same passphrase again: [ENTER]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Your identification has been saved in /home/alberto/.ssh/id_ecdsa.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Your public key has been saved in /home/alberto/.ssh/id_ecdsa.pub.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The key fingerprint is:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SHA256:QQ0bm3FBXKhLyWUfa7teeHgufwLPdK8nIu0UlMCJ6/M alberto@mut</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The key&#x27;s randomart image is:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---[ECDSA 256]---+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|        =B==.    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       ..BO...   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       .=* .oo   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|        *. .+    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       oS. ...   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|        +   o+. .|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|         o .+*+..|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|          E.=== +|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|           +o++* |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----[SHA256]-----+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>En este caso hemos optado por dejar el nombre de la clave por defecto (~/.ssh/id_ecdsa). Si vamos al directorio ~/.ssh veremos que existen dos nuevos ficheros, que se corresponden con la clave p√∫blica y la privada:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-rw------- 1 alberto alberto   227 feb 18 09:16 id_ecdsa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-rw-r--r-- 1 alberto alberto   173 feb 18 09:16 id_ecdsa.pub</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>L√≥gicamente la clave privada se ha protegido en el sistema de forma que s√≥lo el propietario puede leerla o modificarla, mientras que la p√∫blica puede leerla cualquier usuario y en general podr√° estar accesible en cualquier sitio sin restricciones, ya que no es posible obtener la clave privada a partir de ella.</p>
<p>Vemos el contenido de estas claves (obviamente se muestran aqu√≠ a modo de ejemplo y se trata de claves que no se van a utilizar nunca en un entorno real):</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">~/.ssh/id_ecdsa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----BEGIN EC PRIVATE KEY-----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MHcCAQEEIN53r8/ghcQ94wjNPtvz0VvSFsuU7ePsPkriWPhpC137oAoGCCqGSM49</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AwEHoUQDQgAEXJKU4yRlIdnKGG8qQA2PXpfCPVz9xpbB3TXOh9ymC9XtjgP3ZCwU</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tdNnLTQNJm8PO4MHtFZBTxeFE39lD7WVYQ==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----END EC PRIVATE KEY-----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~/.ssh/id_ecdsa.pub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAy\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NTYAAABBBFySlOMkZSHZyhhvKkANj16Xwj1c/caWwd01zofcpgvV7Y4D92QsFLXT\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Zy00DSZvDzuDB7RWQU8XhRN/ZQ+1lWE= alberto@mut</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="copia-de-la-clave-p√∫blica-en-el-equipo-remoto">Copia de la clave p√∫blica en el equipo remoto<a class="hash-link" aria-label="Enlace directo al Copia de la clave p√∫blica en el equipo remoto" title="Enlace directo al Copia de la clave p√∫blica en el equipo remoto" href="/docs/servers/protocols/SSH/0referencia#copia-de-la-clave-p√∫blica-en-el-equipo-remoto">‚Äã</a></h3>
<p>Para que se pueda utilizar este mecanismo de autenticaci√≥n es preciso que la clave p√∫blica del usuario se encuentre en la cuenta que √©ste posee en el equipo remoto, de forma m√°s concreta, dentro del fichero ~/.ssh/authorized_keys, por lo que debemos utilizar alg√∫n m√©todo para ubicarla all√≠:</p>
<ul>
<li>Accedemos con contrase√±a y copiamos y pegamos la clave p√∫blica</li>
<li>Accedemos con otra clave p√∫blica que hubi√©semos copiado previamente y pegamos la nueva clave p√∫blica</li>
<li>Utilizamos cualquier sistema en el arranque de la m√°quina que obtenga la clave p√∫blica y la ubique en su sitio (muy habitual en cloud computing)</li>
<li>Utilizamos la herramienta ssh-copy-id
Vamos a ver el √∫ltimo m√©todo:</li>
</ul>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh-copy-id -i ~/.ssh/id_ecdsa debian@172.22.200.175</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: &quot;/home/alberto/.ssh/id_ecdsa.pub&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">debian@172.22.200.175&#x27;s password:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Number of key(s) added: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Now try logging into the machine, with:   &quot;ssh &#x27;debian@172.22.200.175&#x27;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">and check to make sure that only the key(s) you wanted were added.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Si accedemos al equipo remoto, podremos comprobar que la clave p√∫blica que hemos exportado se encuentra en el fichero ~/.ssh/authorized_keys.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="clave-privada-con-nombre-no-est√°ndar">Clave privada con nombre no est√°ndar<a class="hash-link" aria-label="Enlace directo al Clave privada con nombre no est√°ndar" title="Enlace directo al Clave privada con nombre no est√°ndar" href="/docs/servers/protocols/SSH/0referencia#clave-privada-con-nombre-no-est√°ndar">‚Äã</a></h3>
<p>En el caso anterior hemos creado un par de claves con nombre est√°ndar (id_ecdsa e id_ecdsa.pub), pero es posible definir cualquier nombre a la hora de crear el par de claves, por ejemplo:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh-keygen -t ed25519</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Generating public/private ed25519 key pair.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter file in which to save the key (/home/debian/.ssh/id_ed25519): openwebinars</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter passphrase (empty for no passphrase):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter same passphrase again:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Your identification has been saved in openwebinars.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Your public key has been saved in openwebinars.pub.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The key fingerprint is:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SHA256:HzEVg7wVelxLpuHrv+BUG8QG4bI0AsED7PnUvzFdlCI debian@asd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The key&#x27;s randomart image is:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--[ED25519 256]--+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   ..oo. . .O++. |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    . o.  E*oXo. |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   . . o. B+*o=  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|    o . .o.B +.  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|     o  S.o...o  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      .  .+o.. o |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|          .++ .  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|          .o o   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|            . o. |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----[SHA256]-----+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Proceder√≠amos de igual forma que en el caso anterior, aunque ahora para utilizar la clave en cualquier sesi√≥n ssh, deber√≠amos indicarlo de forma expl√≠cita:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh -i ~/.ssh/openwebinars debian@172.22.200.175</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="utilizaci√≥n-en-cloud-computing">Utilizaci√≥n en cloud computing<a class="hash-link" aria-label="Enlace directo al Utilizaci√≥n en cloud computing" title="Enlace directo al Utilizaci√≥n en cloud computing" href="/docs/servers/protocols/SSH/0referencia#utilizaci√≥n-en-cloud-computing">‚Äã</a></h3>
<p>Hoy en d√≠a es cada vez m√°s habitual la utilizaci√≥n de m√°quinas virtuales en alg√∫n proveedor de nube de infraestructura p√∫blica o privada (AWS, Azure, OpenStack, etc.), en estos casos es imprescindible utilizar este mecanismo de clave p√∫blica/privada para acceder a estas m√°quinas virtuales.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="generaci√≥n-de-una-clave-p√∫blica-a-partir-de-la-privada">Generaci√≥n de una clave p√∫blica a partir de la privada<a class="hash-link" aria-label="Enlace directo al Generaci√≥n de una clave p√∫blica a partir de la privada" title="Enlace directo al Generaci√≥n de una clave p√∫blica a partir de la privada" href="/docs/servers/protocols/SSH/0referencia#generaci√≥n-de-una-clave-p√∫blica-a-partir-de-la-privada">‚Äã</a></h3>
<p>Aunque habitualmente se generan ambas claves, en diferentes circunstancias puede ocurrir que tengamos la clave privada, pero no la correspondiente clave p√∫blica, en ese caso podemos utilizar ssh-keygen para obtenerla:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh-keygen -y -f clave &gt;&gt; clave.pub</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Evidentemente si tenemos la clave p√∫blica y no la privada, no podemos hacer el proceso inverso.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="utilizaci√≥n-en-procesos-no-interactivos">Utilizaci√≥n en procesos no interactivos<a class="hash-link" aria-label="Enlace directo al Utilizaci√≥n en procesos no interactivos" title="Enlace directo al Utilizaci√≥n en procesos no interactivos" href="/docs/servers/protocols/SSH/0referencia#utilizaci√≥n-en-procesos-no-interactivos">‚Äã</a></h3>
<p>Puesto que teniendo acceso a la clave privada el acceso se puede realizar al equipo remoto sin ninguna intervenci√≥n, este mecanismo es ideal para su utilizaci√≥n en procesos que no requieran intervenci√≥n humana, como muchas conexiones que pueden realizarse entre diferentes equipos. La conexi√≥n es segura y autenticada, aunque es muy importante custodiar adecuadamente las claves privadas.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="autenticaci√≥n-con-claves-p√∫blicaprivada-y-frase-de-paso">Autenticaci√≥n con claves p√∫blica/privada y frase de paso<a class="hash-link" aria-label="Enlace directo al Autenticaci√≥n con claves p√∫blica/privada y frase de paso" title="Enlace directo al Autenticaci√≥n con claves p√∫blica/privada y frase de paso" href="/docs/servers/protocols/SSH/0referencia#autenticaci√≥n-con-claves-p√∫blicaprivada-y-frase-de-paso">‚Äã</a></h2>
<p>La autenticaci√≥n con clave privada tiene importantes ventajas respecto al acceso con contrase√±a, pero tiene el inconveniente de la custodia de la clave privada. Cualquier usuario que obtuviese nuestra clave privada podr√≠a entrar en nuestra cuenta de cualquier equipo en el que tuvi√©semos exportada la correspondiente clave p√∫blica. Para aumentar la seguridad en esta situaci√≥n se utiliza una frase de paso para proteger la clave privada, frase que se introduce al crear la clave privada o que puede modificarse a posteriori. Vamos a crear una nueva clave, pero en este caso protegida con frase de paso:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh-keygen -t ecdsa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Generating public/private ecdsa key pair.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter file in which to save the key (/home/alberto/.ssh/id_ecdsa):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter passphrase (empty for no passphrase): &lt;- Teclear frase de paso</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter same passphrase again: &lt;- Teclear frase de paso</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Your identification has been saved in /home/alberto/.ssh/id_ecdsa.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Your public key has been saved in /home/alberto/.ssh/id_ecdsa.pub.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The key fingerprint is:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SHA256:mvCLrZMvdUDOorOkvd/1iosAZmhGS2fWPQmjAVMjjtk alberto@mut</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The key&#x27;s randomart image is:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---[ECDSA 256]---+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| +o+ o           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|ooo = = .        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|o+E= = +         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|+ = . + .        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|o* ... .S        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|=.+  o.o.        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| +.o o+..        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|. o.+= + .       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|  .o==B....      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----[SHA256]-----+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>De esta forma la clave privada no es √∫til a menos que se conozca la frase de paso.</p>
<p>Procedemos de igual forma que en el caso anterior, exportando la clave p√∫blica, aunque ahora cada vez que accedamos nos solicitar√° la frase de paso de la clave privada:</p>
<p>ssh -i ~/.ssh/id_ecdsa debian@172.22.200.175
Enter passphrase for key &#x27;/home/alberto/.ssh/id_ecdsa&#x27;:
Hemos ganado en seguridad, pero hemos perdido en usabilidad, porque ahora tenemos que escribir la frase de paso cada vez que accedamos al equipo remoto y adem√°s no es v√°lido para procesos no interactivos. Para solucionar este inconveniente usaremos ssh-agent en una secci√≥n posterior.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ssh---agent">SSH - Agent<a class="hash-link" aria-label="Enlace directo al SSH - Agent" title="Enlace directo al SSH - Agent" href="/docs/servers/protocols/SSH/0referencia#ssh---agent">‚Äã</a></h2>
<p>Activar SSH-Agent</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">eval &quot;$(ssh-agent -s)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh-keygen -t rsa -m PEM -f &lt;nombre-clave&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh-copy-id -i ~/.ssh/id_ecdsa debian@172.22.200.175</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ssh-agent es un programa que permite almacenar las claves privadas de una sesi√≥n y es muy √∫til cuando usamos claves con frase de paso, ya que podemos a√±adir la clave privada al agente ssh y s√≥lo tendremos que poner la frase de paso una vez, permitiendo utilizar ssh de forma transparente sin volver a introducir la frase de paso todo el tiempo que dure la sesi√≥n del usuario (realmente se puede limitar a una cantidad de tiempo menor si se desea).</p>
<p>ssh-agent se suele ejecutar autom√°ticamente en las sesiones gr√°ficas de los sistemas, como podemos verificar mediante:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">env |grep SSH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SSH_AUTH_SOCK=/run/user/1001/keyring/ssh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SSH_AGENT_PID=2743</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>O a trav√©s de ps:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ps aux |grep ssh-agent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alberto   2743  .... ..... 0:00 /usr/bin/ssh-agent x-session-manager</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>De hecho, si tuvi√©ramos alguna clave privada sin frase de paso se habr√≠a cargado autom√°ticamente en el agente ssh y podr√≠amos utilizarla de forma totalmente transparente.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="a√±adir-una-clave-privada-a-ssh-agent">A√±adir una clave privada a ssh-agent<a class="hash-link" aria-label="Enlace directo al A√±adir una clave privada a ssh-agent" title="Enlace directo al A√±adir una clave privada a ssh-agent" href="/docs/servers/protocols/SSH/0referencia#a√±adir-una-clave-privada-a-ssh-agent">‚Äã</a></h3>
<p>Mediante la herramienta ssh-add podemos a√±adir una clave al agente ssh, por ejemplo:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh-add ~/.ssh/openwebinars</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Si la clave est√° protegida por una frase de paso, se nos pedir√° en ese momento, o se utilizar√° la aplicaci√≥n ssh-askpass si se tratase de una aplicaci√≥n gr√°fica u otra que no tuviese asociada una terminal.</p>
<p>Podemos ver las claves cargadas mediante:</p>
<p><code>ssh-add -L</code></p>
<p>Y sus huellas con:</p>
<p><code>ssh-add -l</code></p>
<p>ssh-agent permite que cualquier otra aplicaci√≥n de la misma sesi√≥n utilice las claves privadas que almacena sin tener que volver a autenticarse, por lo que es importante controlar el uso de la sesi√≥n, bloque√°ndola cuando no se est√© usando.</p>
<p>Se pueden eliminar claves ssh del agente mediante:</p>
<p><code>ssh-add -d openwebinars</code></p>
<p>O incluso eliminar todas las claves con:</p>
<p><code>ssh-add -D</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ejecuci√≥n-de-ssh-agent">Ejecuci√≥n de ssh-agent<a class="hash-link" aria-label="Enlace directo al Ejecuci√≥n de ssh-agent" title="Enlace directo al Ejecuci√≥n de ssh-agent" href="/docs/servers/protocols/SSH/0referencia#ejecuci√≥n-de-ssh-agent">‚Äã</a></h3>
<p>En el caso de que utilicemos un sistema que no haya cargado autom√°ticamente un agente ssh, podemos ejecutarlo directamente, habitualmente se har√≠a abriendo una nueva shell:</p>
<p><code>ssh-agent /bin/bash</code></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="gesti√≥n-de-ficheros-authorized_keys-y-known_hosts">Gesti√≥n de ficheros: authorized_keys y known_hosts<a class="hash-link" aria-label="Enlace directo al Gesti√≥n de ficheros: authorized_keys y known_hosts" title="Enlace directo al Gesti√≥n de ficheros: authorized_keys y known_hosts" href="/docs/servers/protocols/SSH/0referencia#gesti√≥n-de-ficheros-authorized_keys-y-known_hosts">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fichero-sshauthorized_keys">Fichero ~/.ssh/authorized_keys<a class="hash-link" aria-label="Enlace directo al Fichero ~/.ssh/authorized_keys" title="Enlace directo al Fichero ~/.ssh/authorized_keys" href="/docs/servers/protocols/SSH/0referencia#fichero-sshauthorized_keys">‚Äã</a></h3>
<p>Se almacenan las claves p√∫blicas de los usuarios que pueden acceder a esta cuenta mediante clave p√∫blica/clave privada, el formato es:</p>
<p><code>algoritmo clave_publica comentario</code></p>
<p>Por ejemplo:</p>
<p><code>ssh-rsa AAAAB3NzaC1yc2EAA...dPh alberto@mut</code></p>
<p>Si queremos que utilizar un par de claves para acceder a un equipo, debemos asegurarnos de que exista la clave p√∫blica en este fichero y cuando ya dejemos de utilizarla debemos borrar la l√≠nea correspondiente.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fichero-sshknown_hosts">Fichero ~/.ssh/known_hosts<a class="hash-link" aria-label="Enlace directo al Fichero ~/.ssh/known_hosts" title="Enlace directo al Fichero ~/.ssh/known_hosts" href="/docs/servers/protocols/SSH/0referencia#fichero-sshknown_hosts">‚Äã</a></h3>
<p>Se almacenan las claves p√∫blicas de todos los equipos remotos a los que nos hemos conectado y que hemos aceptado, el formato es:</p>
<p><code>nombre_o_IP_equipo algoritmo clave_p√∫blica</code></p>
<p>Actualmente es m√°s habitual que no se guarde el nombre o direcci√≥n IP del equipo en claro, sino que se almacene el hash. Para encontrar un determinado equipo por nombre o direcci√≥n IP podemos utilizar la instrucci√≥n:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh-keygen -F 172.22.200.175</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Host 172.22.200.175 found: line 88</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|1|lbA....9Lo= ecdsa-sha2-nistp256 AAAA.....ynTO90=</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cambio-de-clave-p√∫blica-del-servidor">Cambio de clave p√∫blica del servidor<a class="hash-link" aria-label="Enlace directo al Cambio de clave p√∫blica del servidor" title="Enlace directo al Cambio de clave p√∫blica del servidor" href="/docs/servers/protocols/SSH/0referencia#cambio-de-clave-p√∫blica-del-servidor">‚Äã</a></h3>
<p>Habitualmente se almacenan las claves p√∫blicas de los servidores a los que nos hemos conectado previamente en el fichero ~/.ssh/known_hosts, por lo que se verifica cada vez que se conecta que el servidor ofrece la misma clave p√∫blica. En caso de que no coincida veremos el siguiente mensaje:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh debian@172.22.200.175</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Someone could be eavesdropping on you right now (man-in-the-middle attack)!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">It is also possible that a host key has just been changed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The fingerprint for the ECDSA key sent by the remote host is</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SHA256:J9CMWSbavkqECRI1KWhy8s/D7UVJWDiysAocAbo1F6k.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Please contact your system administrator.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Add correct host key in /home/alberto/.ssh/known_hosts to get rid of this message.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Offending ECDSA key in /home/alberto/.ssh/known_hosts:88</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  remove with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ssh-keygen -f &quot;/home/alberto/.ssh/known_hosts&quot; -R 172.22.200.175</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ECDSA host key for 172.22.200.175 has changed and you have requested strict checking.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Host key verification failed.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Es posible que se trate de una suplantaci√≥n y por tanto un problema de seguridad, pero tambi√©n es posible que se haya realizado un cambio en el servidor que haya implicado un cambio en las claves del servicio ssh o una situaci√≥n muy habitual hoy en d√≠a: estamos reutilizando la misma IP para un nuevo servidor.</p>
<p>En caso de que estemos seguros de que no hay ning√∫n problema de seguridad al acceder a ese equipo remoto, debemos eliminar la antigua clave asociada a la direcci√≥n IP (o al nombre), mediante la instrucci√≥n:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh-keygen -R 172.22.200.175</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Host 172.22.200.175 found: line 88</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/home/alberto/.ssh/known_hosts updated.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Original contents retained as /home/alberto/.ssh/known_hosts.old</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="forwarding">Forwarding<a class="hash-link" aria-label="Enlace directo al Forwarding" title="Enlace directo al Forwarding" href="/docs/servers/protocols/SSH/0referencia#forwarding">‚Äã</a></h2>
<p>Agent forwarding
Mediante esta t√©cnica, es posible que el cliente ssh se comunique con un agente ssh que corre un una m√°quina remota y sin necesidad de poner las claves privadas en √©l, poder saltar a otro equipo remoto no accesible directamente. Es una t√©cnica muy √∫til que permite no exponer directamente los servidores a los que realmente queremos acceder mediante ssh, sino que accedemos a ellos de forma transparente usando un equipo a modo de basti√≥n.</p>
<p>Esta posibilidad debe estar habilitada en el servidor intermedio mediante la directiva:</p>
<p><code>allowagentforwarding yes</code></p>
<p>Que est√° habilitada por defecto.</p>
<p>En el cliente es necesario habilitar el par√°metro:</p>
<p><code>ForwardAgent yes</code></p>
<p>X11 forwarding
A trav√©s de la t√©cnica de X11 forwarding podemos ver en nuestra pantalla aplicaciones gr√°ficas que se ejecutan a trav√©s de ssh en un equipo remoto (y viceversa).</p>
<p>Aunque en primer lugar tiene que estar permitido en el servidor a trav√©s de las directivas:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">X11Forwarding yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">X11DisplayOffset 10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>El cliente para conectarse y utilizar esta funcionalidad, deber√° configurar adicionalmente la opci√≥n:</p>
<p><code>ForwardX11 yes</code></p>
<p>Al conectarnos por ssh podremos comprobar que est√° definida la variable DISPLAY con un valor definido a trav√©s de la variable X11DisplayOffset, por ejemplo:</p>
<p><code>env |grep DISPLAY</code></p>
<p>DISPLAY=localhost:10
Al ejecutar una aplicaci√≥n en el equipo remoto sobre la conexi√≥n ssh nos aparecer√° en nuestra pantalla.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuraci√≥n-del-cliente">Configuraci√≥n del cliente<a class="hash-link" aria-label="Enlace directo al Configuraci√≥n del cliente" title="Enlace directo al Configuraci√≥n del cliente" href="/docs/servers/protocols/SSH/0referencia#configuraci√≥n-del-cliente">‚Äã</a></h3>
<p>Existe el fichero /etc/ssh/ssh_config en el que se especifican los par√°metros de configuraci√≥n generales que van a utilizar por defecto todos los clientes ssh que se ejecuten en esa m√°quina.</p>
<p>Los posibles par√°metros que podemos definir en ese fichero se detallan en la p√°gina 5 del manual de ssh_config.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="algunos-par√°metros-significativos">Algunos par√°metros significativos<a class="hash-link" aria-label="Enlace directo al Algunos par√°metros significativos" title="Enlace directo al Algunos par√°metros significativos" href="/docs/servers/protocols/SSH/0referencia#algunos-par√°metros-significativos">‚Äã</a></h3>
<p>SendEnv LANG LC_*
Mediante este par√°metro se define en el equipo remoto los par√°metros de localizaci√≥n del cliente, siempre que estos est√©n definidos all√≠. Por ejemplo, supongamos que la variable local sea LANG=es.ES.UTF-8, seguir√° siendo en el equipo remoto siempre que exista, en caso contrario se pondr√° la localizaci√≥n por defecto del sistema:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">usuario@cliente:~$ echo $LANG</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">es_ES.UTF-8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usuario@cliente:~$ ssh root@servidor1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The programs included with the Debian GNU/Linux system are free software;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">the exact distribution terms for each program are described in the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">individual files in /usr/share/doc/*/copyright.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">permitted by applicable law.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No mail.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Last login: Thu Feb 22 10:06:47 2018 from ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@servidor1:~# echo $LANG</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">en_US.UTF-8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hashknownhosts-yesno">HashKnownHosts yes|no<a class="hash-link" aria-label="Enlace directo al HashKnownHosts yes|no" title="Enlace directo al HashKnownHosts yes|no" href="/docs/servers/protocols/SSH/0referencia#hashknownhosts-yesno">‚Äã</a></h3>
<p>Para ofuscar mediante un hash la IP o el nombre de los servidores de los que almacenamos las claves p√∫blicas en el fichero ~/.ssh/known_hosts</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gssapiauthentication-yesno">GSSAPIAuthentication yes|no<a class="hash-link" aria-label="Enlace directo al GSSAPIAuthentication yes|no" title="Enlace directo al GSSAPIAuthentication yes|no" href="/docs/servers/protocols/SSH/0referencia#gssapiauthentication-yesno">‚Äã</a></h3>
<p>Para habilitar este m√©todo de autenticaci√≥n, en sistemas Debian viene habilitado, aunque s√≥lo es necesario en los casos en los que se vaya a usar este m√©todo de autenticaci√≥n.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="car√°cter-de-escape">Car√°cter de escape<a class="hash-link" aria-label="Enlace directo al Car√°cter de escape" title="Enlace directo al Car√°cter de escape" href="/docs/servers/protocols/SSH/0referencia#car√°cter-de-escape">‚Äã</a></h3>
<p>En algunas ocasiones podemos tener problemas con nuestra conexi√≥n ssh y que la shell remota no responda a las instrucciones que mandamos, en esos casos siempre se podr√° cerrar la conexi√≥n mediante el car√°cter de escape que hayamos definido en nuestro cliente ssh, este caracter por defecto es ‚Äú~‚Äù:</p>
<p><code>EscapeChar ~</code></p>
<p>Para ejecutarlo escribir√≠amos la secuencia ‚Äú~.‚Äù</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="forwardagent-forwardx11">ForwardAgent, ForwardX11<a class="hash-link" aria-label="Enlace directo al ForwardAgent, ForwardX11" title="Enlace directo al ForwardAgent, ForwardX11" href="/docs/servers/protocols/SSH/0referencia#forwardagent-forwardx11">‚Äã</a></h3>
<p>Explicados en la secci√≥n espec√≠fica de forwarding</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="globalknownhostsfile-fichero">GlobalKnownHostsFile fichero<a class="hash-link" aria-label="Enlace directo al GlobalKnownHostsFile fichero" title="Enlace directo al GlobalKnownHostsFile fichero" href="/docs/servers/protocols/SSH/0referencia#globalknownhostsfile-fichero">‚Äã</a></h3>
<p>Permite la utilizaci√≥n de un fichero known_hosts para todos los
usuarios de un equipo.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="numberofpasswordprompts">NumberOfPasswordPrompts<a class="hash-link" aria-label="Enlace directo al NumberOfPasswordPrompts" title="Enlace directo al NumberOfPasswordPrompts" href="/docs/servers/protocols/SSH/0referencia#numberofpasswordprompts">‚Äã</a></h3>
<p>N√∫mero de intentos de acceso con contrase√±a. Por defecto es 3</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="stricthostkeychecking-yesaskno">StrictHostKeyChecking yes|ask|no<a class="hash-link" aria-label="Enlace directo al StrictHostKeyChecking yes|ask|no" title="Enlace directo al StrictHostKeyChecking yes|ask|no" href="/docs/servers/protocols/SSH/0referencia#stricthostkeychecking-yesaskno">‚Äã</a></h3>
<p>Par√°metro muy importante, utiliza para la gesti√≥n de las claves p√∫blicas de los equipos remotos. La opci√≥n por defecto es ‚Äúask‚Äù, de manera que si no se ha almacenado previamente la clave p√∫blica se pregunta qu√© hacer. En el caso de ponerla en ‚Äúyes‚Äù, se rechazar√° una conexi√≥n si no existe previamente la clave p√∫blica y en caso de optar por la opci√≥n ‚Äúno‚Äù, no se har√° ninguna verificaci√≥n.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="userknownhostsfile-fichero">UserKnownHostsFile fichero<a class="hash-link" aria-label="Enlace directo al UserKnownHostsFile fichero" title="Enlace directo al UserKnownHostsFile fichero" href="/docs/servers/protocols/SSH/0referencia#userknownhostsfile-fichero">‚Äã</a></h3>
<p>Fichero known_hosts de usuario, por defecto ~/.ssh/known_hosts</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuraci√≥n-por-usuario">Configuraci√≥n por usuario<a class="hash-link" aria-label="Enlace directo al Configuraci√≥n por usuario" title="Enlace directo al Configuraci√≥n por usuario" href="/docs/servers/protocols/SSH/0referencia#configuraci√≥n-por-usuario">‚Äã</a></h3>
<p>Salvo algunos par√°metros generales, es poco probable que la mayor√≠a de los par√°metros que se pueden definir para el cliente ssh sean √∫tiles para todos los usuarios de un equipo, es mucho m√°s habitual que un usuario defina un fichero de configuraci√≥n con sus propios par√°metros. Este fichero es ~/.ssh/config y los par√°metros aqu√≠ definidos prevalecen sobre los generales.</p>
<p>Se pueden definir par√°metros para todos los equipos remotos, pero es tambi√©n muy √∫til agruparlos con el par√°metro Host como en el siguiente ejemplo:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GSSAPIAuthentication no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Host 192.168.1.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     User root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Port 2022</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     ForwardAgent yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Identityfile ~/.ssh/id_ecdsa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     StrictHostKeyChecking yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Host *.example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     StrictHostKeyChecking no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     UserKnownHostsFile=/dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     LogLevel QUIET</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="utilizar-par√°metros-directamente">Utilizar par√°metros directamente<a class="hash-link" aria-label="Enlace directo al Utilizar par√°metros directamente" title="Enlace directo al Utilizar par√°metros directamente" href="/docs/servers/protocols/SSH/0referencia#utilizar-par√°metros-directamente">‚Äã</a></h3>
<p>Independientemente de los par√°metros que est√©n definidos en cualquiera de las opciones anteriores, tambi√©n es posible utilizar par√°metros de forma expl√≠cita en la propia l√≠nea de comandos, pas√°ndolos mediante el modificador ‚Äú-o‚Äù, por ejemplo:</p>
<p><code>ssh -o &quot;ForwardAgent yes&quot; usuario@172.22.200.175</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuraci√≥n-del-servidor">Configuraci√≥n del servidor<a class="hash-link" aria-label="Enlace directo al Configuraci√≥n del servidor" title="Enlace directo al Configuraci√≥n del servidor" href="/docs/servers/protocols/SSH/0referencia#configuraci√≥n-del-servidor">‚Äã</a></h2>
<p>Tal como vimos en la instalaci√≥n y configuraci√≥n elemental del servidor ssh, podemos ver las opciones de configuraci√≥n que se aplican a nuestro servidor mediante:</p>
<p><code>sshd -T |less</code></p>
<p>Vamos a comentar algunas que pueden ser interesantes porque se modifican con cierta frecuencia.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="port-22">Port 22<a class="hash-link" aria-label="Enlace directo al Port 22" title="Enlace directo al Port 22" href="/docs/servers/protocols/SSH/0referencia#port-22">‚Äã</a></h3>
<p>Puerto tcp en el qu va a escuchar peticiones el servidor ssh, por defecto es el 22/tcp, pero puede cambiarse sin problema.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="addressfamily-anyinetinet6">AddressFamily any|inet|inet6<a class="hash-link" aria-label="Enlace directo al AddressFamily any|inet|inet6" title="Enlace directo al AddressFamily any|inet|inet6" href="/docs/servers/protocols/SSH/0referencia#addressfamily-anyinetinet6">‚Äã</a></h3>
<p>El protocolo o protocolos de red a utilizar, puede ser inet(IPv4), inet6 (IPv6) o any(ambos) que es la opci√≥n por defecto.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="listenaddress">ListenAddress<a class="hash-link" aria-label="Enlace directo al ListenAddress" title="Enlace directo al ListenAddress" href="/docs/servers/protocols/SSH/0referencia#listenaddress">‚Äã</a></h3>
<p>Si queremos especificar que se permitan conexiones s√≥lo a trav√©s de una direcci√≥n IP concreta (IPv4/IPv6).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="logingracetime-maxauthtries-y-maxsessions">logingracetime, maxauthtries y maxsessions<a class="hash-link" aria-label="Enlace directo al logingracetime, maxauthtries y maxsessions" title="Enlace directo al logingracetime, maxauthtries y maxsessions" href="/docs/servers/protocols/SSH/0referencia#logingracetime-maxauthtries-y-maxsessions">‚Äã</a></h3>
<p>Para especificar el tiempo que se espera para que el usuario se acceda con √©xito al sistema, el n√∫mero m√°ximo de veces que puede introducir la contrase√±a y el n√∫mero m√°ximo de sesiones en la misma conexi√≥n.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="loglevel-y-syslogfacility">loglevel y syslogfacility<a class="hash-link" aria-label="Enlace directo al loglevel y syslogfacility" title="Enlace directo al loglevel y syslogfacility" href="/docs/servers/protocols/SSH/0referencia#loglevel-y-syslogfacility">‚Äã</a></h3>
<p>Para controlar el nivel de detalle que mostrar en los logs del sistema, as√≠ como la ‚Äúfacility‚Äù a utilizar.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hostkey">hostkey<a class="hash-link" aria-label="Enlace directo al hostkey" title="Enlace directo al hostkey" href="/docs/servers/protocols/SSH/0referencia#hostkey">‚Äã</a></h3>
<p>Fichero o ficheros que especifican la clave o claves privadas a utilizar por el servidor.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="utilizaci√≥n-de-scp">Utilizaci√≥n de SCP<a class="hash-link" aria-label="Enlace directo al Utilizaci√≥n de SCP" title="Enlace directo al Utilizaci√≥n de SCP" href="/docs/servers/protocols/SSH/0referencia#utilizaci√≥n-de-scp">‚Äã</a></h2>
<p>El cliente ssh incluye tambi√©n el comando ‚Äúscp‚Äù que permite copiar ficheros entre entre equipos mediante ssh y hacerlo de forma equivalente a la utilizaci√≥n local del cl√°sico comando ‚Äúcp‚Äù.</p>
<p>No es necesario que el equipo origen o destino sea el equipo desde el que se ejecuta scp, tanto origen como destino pueden ser equipos a los que pueda acceder el usuario utilizando ssh.</p>
<p>La sintaxis general de scp es:</p>
<p><code>scp [[user@]host1:]file1 [[user@]host2:]file2</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transferir-un-fichero-local-a-un-equipo-remoto">Transferir un fichero local a un equipo remoto<a class="hash-link" aria-label="Enlace directo al Transferir un fichero local a un equipo remoto" title="Enlace directo al Transferir un fichero local a un equipo remoto" href="/docs/servers/protocols/SSH/0referencia#transferir-un-fichero-local-a-un-equipo-remoto">‚Äã</a></h3>
<p><code>scp /etc/resolv.conf usuario@172.22.200.175:resolv.conf.local</code></p>
<p>El fichero remoto quedar√° como /home/usuario/resolv.conf.local ya que : indica el punto de acceso al equipo (/home/usuario/ en este caso)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transferir-un-fichero-desde-un-equipo-remoto-a-mi-equipo-local">Transferir un fichero desde un equipo remoto a mi equipo local<a class="hash-link" aria-label="Enlace directo al Transferir un fichero desde un equipo remoto a mi equipo local" title="Enlace directo al Transferir un fichero desde un equipo remoto a mi equipo local" href="/docs/servers/protocols/SSH/0referencia#transferir-un-fichero-desde-un-equipo-remoto-a-mi-equipo-local">‚Äã</a></h3>
<p><code>scp root@172.22.200.175:/etc/shadow .</code></p>
<p>Que guardar√≠a el fichero /etc/shadow del equipo remoto con el nombre shadow en el directorio en el que nos encontramos</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transferir-un-fichero-entre-dos-equipos-remotos">Transferir un fichero entre dos equipos remotos<a class="hash-link" aria-label="Enlace directo al Transferir un fichero entre dos equipos remotos" title="Enlace directo al Transferir un fichero entre dos equipos remotos" href="/docs/servers/protocols/SSH/0referencia#transferir-un-fichero-entre-dos-equipos-remotos">‚Äã</a></h3>
<p><code>scp root@172.22.200.175:/etc/hosts root@172.22.200.176:/etc/hosts</code></p>
<p>Esta opci√≥n es muy potente y permite crear sencillos scripts para unificar configuraciones, por ejemplo imaginemos que queremos tener la misma configuraci√≥n DNS en un conjunto de servidores, podr√≠amos hacerlo de forma sencilla y potente con ssh mediante el siguiente script:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for i in `seq 1 100`; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  scp root@servidor1:/etc/resolv.conf 192.168.1.$i:/etc/resolv.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">done</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bonus-track">Bonus track<a class="hash-link" aria-label="Enlace directo al Bonus track" title="Enlace directo al Bonus track" href="/docs/servers/protocols/SSH/0referencia#bonus-track">‚Äã</a></h3>
<p>Si utilizamos pares de claves en las conexiones, scp autocompleta el fichero origen o destino utilizando el doble tabulador</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sftp">SFTP<a class="hash-link" aria-label="Enlace directo al SFTP" title="Enlace directo al SFTP" href="/docs/servers/protocols/SSH/0referencia#sftp">‚Äã</a></h2>
<p>Al igual que scp, sftp permite transferir ficheros entre equipos remotos a trav√©s de SSH, aunque su principal diferencia es que sftp permite utilizarlo de una forma interactiva, al igual que el tradicional ftp, incluyendo los mismos comandos que √©ste. scp es mucho m√°s habitual utilizarlo desde l√≠nea de comandos, mientras que sftp se puede utilizar bien desde la l√≠nea de comandos o a trav√©s de uno de los m√∫ltiples clientes ftp que lo soportan.</p>
<p>Es importante no confundir sftp (ssh ftp) con ftps que es una extensi√≥n del protocolo ftp a√±adiendo ssl para el cifrado de la conexi√≥n.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="t√∫neles-ssh">T√∫neles SSH<a class="hash-link" aria-label="Enlace directo al T√∫neles SSH" title="Enlace directo al T√∫neles SSH" href="/docs/servers/protocols/SSH/0referencia#t√∫neles-ssh">‚Äã</a></h2>
<p>Esta t√©cnica, tambi√©n conocida como TCP forwarding o port forwarding, permite utilizar cualquier aplicaci√≥n de forma segura a trav√©s de una conexi√≥n ssh (de ah√≠ la utilizaci√≥n del t√©rmino t√∫nel).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="local-forwarding">Local forwarding<a class="hash-link" aria-label="Enlace directo al Local forwarding" title="Enlace directo al Local forwarding" href="/docs/servers/protocols/SSH/0referencia#local-forwarding">‚Äã</a></h3>
<p>Desde nuestra m√°quina queremos acceder a un servicio, pero este servicio o bien no es accesible (por ejemplo por un cortafuegos que lo impide), o no es seguro hacerlo desde nuestra m√°quina, pero tenemos acceso a otro equipo a trav√©s de ssh y desde ese equipo s√≠ podemos acceder al servicio que queremos o es seguro hacerlo. Vamos a verlo con un ejemplo: queremos enviar un correo desde nuestro servidor de la empresa (puerto 25/tcp), pero estamos fuera y no queremos conectarnos de forma insegura, por lo que establecemos un t√∫nel ssh de la siguiente forma:</p>
<p><code>ssh -f -L 1025:smtp.example.com:25 remoto.example.com -N</code></p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Cerrar el proceso del tunel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kill &lt;id-proceso&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar c√≥digo" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Esto abrir√° el puerto 1025/tcp en nuestra m√°quina que podremos utilizar de forma segura para enviar correo, ya que se pasar√° a trav√©s de ssh al equipo remoto.example.com y de ah√≠ al servidor smtp.example.com.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="remote-forwarding">Remote forwarding<a class="hash-link" aria-label="Enlace directo al Remote forwarding" title="Enlace directo al Remote forwarding" href="/docs/servers/protocols/SSH/0referencia#remote-forwarding">‚Äã</a></h3>
<p>Supongamos el caso contrario, en el que queremos que una m√°quina remota utilice un servicio de nuestra m√°quina, pero o bien no es accesible de forma directa o bien no es seguro hacerlo, por lo que podr√≠amos definir una conexi√≥n ssh para realizarlo como la siguiente:</p>
<p><code>ssh -f -L 8080:localhost:80 remoto.example.com -N</code></p>
<p>De esa manera desde el equipo remoto, quien acceda al puerto 8080/tcp estar√° accesiendo al puerto 80/tcp de nuestra m√°quina a trav√©s de un t√∫nel ssh.</p>
<p>La directiva ‚ÄúGatewayPorts yes|no‚Äù limita el puerto 8080 del caso anterior a que se pueda acceder s√≥lo desde el propio equipo remoto, o bien desde cualquier equipo.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="forwarding-din√°mico">Forwarding din√°mico<a class="hash-link" aria-label="Enlace directo al Forwarding din√°mico" title="Enlace directo al Forwarding din√°mico" href="/docs/servers/protocols/SSH/0referencia#forwarding-din√°mico">‚Äã</a></h3>
<p>Mediante este mecanismo, lo que hacemos es crear un servidor SOCKS en nuestro equipo, que permite utilizar desde nuestra m√°quina cualquier cliente que soporte este mecanismo, en particular un navegador web. Definir√≠amos un servidor socks local que sale a trav√©s de un t√∫nel ssh con un equipo remoto de la siguiente forma:</p>
<p><code>ssh -D 8080 -f -C -q -N remote.example.com</code></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="P√°gina del documento"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/servers/protocols/MQTT/emqx"><div class="pagination-nav__sublabel">Anterior</div><div class="pagination-nav__label">EMQX</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/category/sistemas"><div class="pagination-nav__sublabel">Siguiente</div><div class="pagination-nav__label">Sistemas</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#instalaci√≥n-de-un-servidor-ssh">Instalaci√≥n de un servidor SSH</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#autenticaci√≥n-con-usuario-y-contrase√±a">Autenticaci√≥n con usuario y contrase√±a</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#ejercicio-simple-de-acceso-con-usuariocontrase√±a">Ejercicio simple de acceso con usuario/contrase√±a</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#ejecuci√≥n-remota">Ejecuci√≥n remota</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#consideraciones-acerca-de-root">Consideraciones acerca de root</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#otras-opciones">Otras opciones</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#autenticaci√≥n-con-claves-p√∫blicaprivada-con-frase-de-paso">Autenticaci√≥n con claves p√∫blica/privada con frase de paso</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#creaci√≥n-de-la-clave-privada">Creaci√≥n de la clave privada</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#copia-de-la-clave-p√∫blica-en-el-equipo-remoto">Copia de la clave p√∫blica en el equipo remoto</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#clave-privada-con-nombre-no-est√°ndar">Clave privada con nombre no est√°ndar</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#utilizaci√≥n-en-cloud-computing">Utilizaci√≥n en cloud computing</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#generaci√≥n-de-una-clave-p√∫blica-a-partir-de-la-privada">Generaci√≥n de una clave p√∫blica a partir de la privada</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#utilizaci√≥n-en-procesos-no-interactivos">Utilizaci√≥n en procesos no interactivos</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#autenticaci√≥n-con-claves-p√∫blicaprivada-y-frase-de-paso">Autenticaci√≥n con claves p√∫blica/privada y frase de paso</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#ssh---agent">SSH - Agent</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#a√±adir-una-clave-privada-a-ssh-agent">A√±adir una clave privada a ssh-agent</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#ejecuci√≥n-de-ssh-agent">Ejecuci√≥n de ssh-agent</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#gesti√≥n-de-ficheros-authorized_keys-y-known_hosts">Gesti√≥n de ficheros: authorized_keys y known_hosts</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#fichero-sshauthorized_keys">Fichero ~/.ssh/authorized_keys</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#fichero-sshknown_hosts">Fichero ~/.ssh/known_hosts</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#cambio-de-clave-p√∫blica-del-servidor">Cambio de clave p√∫blica del servidor</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#forwarding">Forwarding</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#configuraci√≥n-del-cliente">Configuraci√≥n del cliente</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#algunos-par√°metros-significativos">Algunos par√°metros significativos</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#hashknownhosts-yesno">HashKnownHosts yes|no</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#gssapiauthentication-yesno">GSSAPIAuthentication yes|no</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#car√°cter-de-escape">Car√°cter de escape</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#forwardagent-forwardx11">ForwardAgent, ForwardX11</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#globalknownhostsfile-fichero">GlobalKnownHostsFile fichero</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#numberofpasswordprompts">NumberOfPasswordPrompts</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#stricthostkeychecking-yesaskno">StrictHostKeyChecking yes|ask|no</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#userknownhostsfile-fichero">UserKnownHostsFile fichero</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#configuraci√≥n-por-usuario">Configuraci√≥n por usuario</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#utilizar-par√°metros-directamente">Utilizar par√°metros directamente</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#configuraci√≥n-del-servidor">Configuraci√≥n del servidor</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#port-22">Port 22</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#addressfamily-anyinetinet6">AddressFamily any|inet|inet6</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#listenaddress">ListenAddress</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#logingracetime-maxauthtries-y-maxsessions">logingracetime, maxauthtries y maxsessions</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#loglevel-y-syslogfacility">loglevel y syslogfacility</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#hostkey">hostkey</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#utilizaci√≥n-de-scp">Utilizaci√≥n de SCP</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#transferir-un-fichero-local-a-un-equipo-remoto">Transferir un fichero local a un equipo remoto</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#transferir-un-fichero-desde-un-equipo-remoto-a-mi-equipo-local">Transferir un fichero desde un equipo remoto a mi equipo local</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#transferir-un-fichero-entre-dos-equipos-remotos">Transferir un fichero entre dos equipos remotos</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#bonus-track">Bonus track</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#sftp">SFTP</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#t√∫neles-ssh">T√∫neles SSH</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#local-forwarding">Local forwarding</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#remote-forwarding">Remote forwarding</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/servers/protocols/SSH/0referencia#forwarding-din√°mico">Forwarding din√°mico</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><span class="footer__link-item">
              <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
              <script>document.getElementById("personal_email").addEventListerner("click",(()=>console.log("OK")))</script>
            </span><span class="footer__link-separator">¬∑</span><span class="footer__link-item">
            <h2>Informaci√≥n de contacto</h2>
            <div class="footer__contact-info__item">
              <span class="material-symbols-outlined footer__material-symbols-outlined">mail</span>
              <a title="Correo personal - Rub√©n Rosales" href="mail:rubenfranciscogr@outlook.com" target="_blank">rubenfranciscogr@outlook.com</a>
            </div>
            <br>
          </span><span class="footer__link-separator">¬∑</span><span class="footer__link-item">
            
            <h2>S√≠gueme en mis redes</h2>
            <div class="footer__social">
              <!-- FACEBOOK -->
              <a title="Facebook - Rub√©n Rosales" href="https://www.facebook.com/rubenfrancisco.gazquezrosales" target="_blank">
                <svg class="footer__social__svg" width="31" height="31" viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M26.9717 0H3.23661C2.37821 0 1.55496 0.343994 0.94798 0.956307C0.340999 1.56862 0 2.3991 0 3.26504L0 27.2086C0 28.0746 0.340999 28.9051 0.94798 29.5174C1.55496 30.1297 2.37821 30.4737 3.23661 30.4737H12.4913V20.1133H8.24323V15.2368H12.4913V11.5201C12.4913 7.2926 14.9862 4.95742 18.8074 4.95742C20.6374 4.95742 22.5511 5.28664 22.5511 5.28664V9.43596H20.4425C18.3651 9.43596 17.7171 10.7365 17.7171 12.0704V15.2368H22.3548L21.6131 20.1133H17.7171V30.4737H26.9717C27.8301 30.4737 28.6534 30.1297 29.2604 29.5174C29.8673 28.9051 30.2083 28.0746 30.2083 27.2086V3.26504C30.2083 2.3991 29.8673 1.56862 29.2604 0.956307C28.6534 0.343994 27.8301 0 26.9717 0Z" fill="#FEFEFE"/>
                </svg>
              </a>

              <!-- LINKEDIN -->
              <a title="Linkedin - Rub√©n Rosales" href="https://www.linkedin.com/in/rub%C3%A9n-francisco-gazquez-rosales-45b788160" target="_blank">
                <svg class="footer__social__svg" width="31" height="31" viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M28.3978 0H2.49822C1.31147 0 0.347229 0.986314 0.347229 2.1971V28.2766C0.347229 29.4874 1.31147 30.4737 2.49822 30.4737H28.3978C29.5846 30.4737 30.5556 29.4874 30.5556 28.2766V2.1971C30.5556 0.986314 29.5846 0 28.3978 0ZM9.47716 26.1203H4.99985V11.5773H9.4839V26.1203H9.47716ZM7.2385 9.59105C5.80226 9.59105 4.64248 8.41427 4.64248 6.97222C4.64248 5.53016 5.80226 4.35338 7.2385 4.35338C8.66801 4.35338 9.83453 5.53016 9.83453 6.97222C9.83453 8.42108 8.67475 9.59105 7.2385 9.59105ZM26.2603 26.1203H21.783V19.0461C21.783 17.3591 21.7493 15.1892 19.4567 15.1892C17.1236 15.1892 16.7663 17.0258 16.7663 18.9236V26.1203H12.289V11.5773H16.5842V13.5635H16.6449C17.245 12.4207 18.7082 11.2168 20.8862 11.2168C25.4174 11.2168 26.2603 14.2301 26.2603 18.1482V26.1203Z" fill="#FEFEFE"/>
                </svg>
              </a>

              <!-- GITHUB -->
              <a title="Github - Rub√©n Rosales" href="https://github.com/rubenfgr" target="_blank">
                <svg class="footer__social__svg" width="31" height="31" viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M27.7009 0H3.96579C2.17892 0 0.729187 1.46246 0.729187 3.26504V27.2086C0.729187 29.0112 2.17892 30.4737 3.96579 30.4737H27.7009C29.4878 30.4737 30.9375 29.0112 30.9375 27.2086V3.26504C30.9375 1.46246 29.4878 0 27.7009 0ZM19.4273 26.0999C18.8609 26.2019 18.6519 25.8482 18.6519 25.5557C18.6519 25.1884 18.6654 23.311 18.6654 21.7941C18.6654 20.733 18.3148 20.0596 17.9034 19.7059C20.3983 19.427 23.0281 19.0801 23.0281 14.7335C23.0281 13.4955 22.5898 12.8765 21.875 12.0806C21.9897 11.7881 22.374 10.5842 21.7604 9.01967C20.8231 8.72717 18.6789 10.2373 18.6789 10.2373C17.7888 9.98557 16.8246 9.85633 15.8738 9.85633C14.9231 9.85633 13.9588 9.98557 13.0688 10.2373C13.0688 10.2373 10.9245 8.72717 9.98723 9.01967C9.37363 10.5774 9.75123 11.7813 9.8726 12.0806C9.15785 12.8765 8.82071 13.4955 8.82071 14.7335C8.82071 19.0597 11.3358 19.427 13.8307 19.7059C13.507 19.9984 13.2171 20.5017 13.116 21.2227C12.4754 21.5152 10.8368 22.0186 9.85912 20.2772C9.24551 19.2025 8.13967 19.1141 8.13967 19.1141C7.04731 19.1005 8.0655 19.8079 8.0655 19.8079C8.79373 20.148 9.3062 21.454 9.3062 21.454C9.96026 23.4743 13.089 22.794 13.089 22.794C13.089 23.7395 13.1025 25.2768 13.1025 25.5557C13.1025 25.8482 12.9002 26.2019 12.327 26.0999C7.87669 24.5966 4.76146 20.3249 4.76146 15.3321C4.76146 9.08769 9.495 4.34658 15.685 4.34658C21.875 4.34658 26.8918 9.08769 26.8918 15.3321C26.8985 20.3249 23.8777 24.6034 19.4273 26.0999ZM12.8125 21.9438C12.6844 21.971 12.563 21.9166 12.5495 21.8281C12.5361 21.7261 12.6237 21.6377 12.7518 21.6105C12.88 21.5969 13.0013 21.6513 13.0148 21.7397C13.035 21.8281 12.9474 21.9166 12.8125 21.9438ZM12.1719 21.8826C12.1719 21.971 12.0708 22.0458 11.9359 22.0458C11.7876 22.0594 11.6865 21.9846 11.6865 21.8826C11.6865 21.7941 11.7876 21.7193 11.9225 21.7193C12.0506 21.7057 12.1719 21.7805 12.1719 21.8826ZM11.2482 21.8077C11.2212 21.8962 11.0863 21.937 10.9717 21.8962C10.8436 21.8689 10.7559 21.7669 10.7829 21.6785C10.8099 21.5901 10.9447 21.5492 11.0594 21.5765C11.1942 21.6173 11.2819 21.7193 11.2482 21.8077ZM10.4188 21.4404C10.3581 21.5152 10.23 21.5016 10.1288 21.3996C10.0277 21.3112 10.0007 21.1819 10.0681 21.1207C10.1288 21.0459 10.2569 21.0595 10.3581 21.1615C10.4458 21.25 10.4795 21.386 10.4188 21.4404ZM9.80517 20.8214C9.74449 20.8622 9.62986 20.8214 9.55568 20.7194C9.48151 20.6174 9.48151 20.5017 9.55568 20.4541C9.62986 20.3929 9.74449 20.4405 9.80517 20.5425C9.87935 20.6446 9.87935 20.767 9.80517 20.8214ZM9.36688 20.1616C9.3062 20.2228 9.20505 20.1888 9.13088 20.1208C9.05671 20.0324 9.04322 19.9303 9.10391 19.8827C9.16459 19.8215 9.26574 19.8555 9.33991 19.9235C9.41408 20.012 9.42757 20.114 9.36688 20.1616ZM8.91511 19.6582C8.88813 19.7195 8.80048 19.7331 8.7263 19.6855C8.63865 19.6446 8.59819 19.5698 8.62516 19.5086C8.65213 19.4678 8.7263 19.4474 8.81396 19.4814C8.90162 19.529 8.94208 19.6038 8.91511 19.6582Z" fill="#FEFEFE"/>
                </svg>
              </a>
            </div>
          </span></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://rubenfgr.github.io" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/logo.svg" alt="test" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="40"><img src="/img/logo.svg" alt="test" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="40"></a></div><div class="footer__copyright">
          <div>Rub√©n Rosales &copy;</div>
          <div>Todos los derechos reservados</div>
          <div>2024</div>
        
        </div></div></div></footer></div>
</body>
</html>